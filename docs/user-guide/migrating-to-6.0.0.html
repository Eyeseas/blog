<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="keywords" content="ESLint中文, ESLint中文网, ESLint规则, ESLint配置, 代码检测, 代码质量, JavaScript, Linter, Linting, Pluggable, Configurable, Code Quality">
  <meta name="description" content="ESLint中文官网, ESLint中英文对照, JavaScript代码检测, JavaScript代码风格检测, JavaScript代码自动格式化,A pluggable and configurable linter tool for identifying and reporting on patterns in JavaScript. Maintain your code quality with ease.">
  <meta name="theme-color" content="#463fd4"/>
  <meta property="og:locale" content="zh_CN">
  <meta property="og:site_name" content="ESLint中文">
  <meta property="og:title" content="Migrating to v6.0.0">
  <meta property="og:url" content="http://localhost:4000/docs/user-guide/migrating-to-6.0.0">
  <meta property="og:image" content="http://localhost:4000/img/favicon.512x512.png">

  <meta name="twitter:site" content="@geteslint">
  <meta name="twitter:title" content="Migrating to v6.0.0">
  <meta name="twitter:description" content="ESLint中文官网, ESLint中英文对照, JavaScript代码检测, JavaScript代码风格检测, JavaScript代码自动格式化,A pluggable and configurable linter tool for identifying and reporting on patterns in JavaScript. Maintain your code quality with ease.">
  <meta name="twitter:url" content="http://localhost:4000/docs/user-guide/migrating-to-6.0.0">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:image" content="http://localhost:4000/img/favicon.512x512.png">

    
        <title>Migrating to v6.0.0 - ESLint中文</title>
    


  <link href="http://localhost:4000/docs/user-guide/migrating-to-6.0.0" rel="canonical" />
  <link rel="stylesheet" href="/styles/main.css"/>
  
  <link rel="stylesheet" href="/styles/mixed.css"/>
  
  <link rel='manifest' href='http://localhost:4000/manifest.json'>
  <link rel="icon" href="http://localhost:4000/img/favicon.512x512.png">
  <link rel="alternate" type="application/rss+xml" title="ESLint中文" href="http://localhost:4000/feed.xml">
  <!-- at the end of the HEAD -->
  <link rel="stylesheet" href="/styles/vendor/docsearch.min.css" />
</head>
<body>

<input type="checkbox" id="eslint-toggle-search" class="eslint-toggle-search-checkbox" />
<header class="navbar navbar-default navbar-demo navbar-fixed-top eslint-nav" id="top" role="banner">
  <div class="container">

    <a href="http://localhost:4000/" class="navbar-brand"><img alt="ESLint" src="http://localhost:4000/img/logo.svg" itemprop="image">ESLint</a>

    <div class="eslint-navbar-toggles">
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#eslint-navbar" aria-controls="eslint-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <label for="eslint-toggle-search" class="navbar-toggle eslint-toggle-search-open">
        <span class="sr-only">Open search</span>
        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
      </label>
    </div>

    <nav id="eslint-navbar" class="collapse navbar-collapse eslint-navbar">
      
      <ul class="nav navbar-nav navbar-left">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><span class="lang-chooser">中文</span><span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a class="lang-type" data-lang="zh" href="javascript:;">中文</a></li>
            <li><a class="lang-type" data-lang="mixed" href="javascript:;">中英文</a></li>
            <li><a class="lang-type" data-lang="en" href="javascript:;">英文</a></li>
          </ul>
        </li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="http://localhost:4000/docs/user-guide" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">用户指南<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="http://localhost:4000/docs/user-guide/getting-started">开始</a></li>
            <li><a href="http://localhost:4000/docs/user-guide/configuring">配置</a></li>
            <li><a href="http://localhost:4000/docs/user-guide/command-line-interface">命令行</a></li>
            <li><a href="http://localhost:4000/docs/rules/">规则</a></li>
            <li><a href="http://localhost:4000/docs/user-guide/formatters">Formatters</a></li>
            <li><a href="http://localhost:4000/docs/user-guide/integrations">集成</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="http://localhost:4000/docs/developer-guide" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">开发指南<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="http://localhost:4000/docs/developer-guide/architecture">架构</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/source-code">源码</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/development-environment">开发环境</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/contributing">参与</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/unit-tests">单元测试</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/working-with-rules">创建规则</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/working-with-custom-formatters">自定义格式化器</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/working-with-custom-parsers">自定义解析器</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/working-with-plugins">开发插件</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/shareable-configs">可共享的配置</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/nodejs-api">Node.js API</a></li>
            <li><a href="http://localhost:4000/docs/maintainer-guide">维护者指南</a></li>
          </ul>
        </li>
        <li><a href="http://localhost:4000/blog/">博客</a></li>
        <li class="dropdown">
          <a href="http://localhost:4000/demo" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">演示<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="http://localhost:4000/demo/">ESLint Demo</a></li>
            <li><a href="http://localhost:4000/parser/">Espree Demo</a></li>
          </ul>
        </li>
        <!-- <li><a href="http://localhost:4000/docs/about/">About</a></li> -->
        <li class="dropdown">
          <a href="http://localhost:4000/docs/about/" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">关于<span
              class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="http://localhost:4000/users/">谁在使用 ESLint?</a></li>
            <li><a href="http://localhost:4000/team/">关于 Team</a></li>
            <li><a href="http://localhost:4000/docs/about/">关于 ESLint</a></li>
          </ul>
        </li>
      </ul>

      <label for="eslint-toggle-search" class="navbar-toggle eslint-toggle-search-open">
        <span class="sr-only">Open search</span>
        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
      </label>

      <div class="navbar-form navbar-right eslint-search" role="search">
        <div class="input-group">
          <label class="sr-only" aria-label="Search" for="eslint-search-input">Search</label>
          <div class="eslint-search-input-wrapper">
            <input type="text" class="form-control" id="eslint-search-input" accesskey="s" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search the docs...">
            <label for="eslint-toggle-search" class="eslint-toggle-search-close">
              <span class="sr-only">Close search</span>
              <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
            </label>
          </div>
        </div>
      </div>
    </nav>

  </div><!-- /.container -->
</header><!-- /.navbar -->

<main class="doc lang-zh">
  <article class="container">
    <!-- Note: No pull requests accepted for this file. See README.md in the root directory for details. -->

<h1 id="migrating-to-v600">Migrating to v6.0.0</h1>

<p>ESLint v6.0.0 is a major release of ESLint. We have made a few breaking changes in this release. This guide is intended to walk you through the breaking changes.</p>

<p>The lists below are ordered roughly by the number of users each change is expected to affect, where the first items are expected to affect the most users.</p>

<h3 id="breaking-changes-for-users">Breaking changes for users</h3>

<ol>
  <li><a href="#drop-node-6">Node.js 6 is no longer supported</a></li>
  <li><a href="#eslint-recommended-changes"><code class="language-plaintext highlighter-rouge">eslint:recommended</code> has been updated</a></li>
  <li><a href="#package-loading-simplification">Plugins and shareable configs are no longer affected by ESLint’s location</a></li>
  <li><a href="#espree-validation">The default parser now validates options more strictly</a></li>
  <li><a href="#no-redeclare-updates">The <code class="language-plaintext highlighter-rouge">no-redeclare</code> rule is now more strict by default</a></li>
  <li><a href="#comma-dangle-updates">The <code class="language-plaintext highlighter-rouge">comma-dangle</code> rule is now more strict by default</a></li>
  <li><a href="#no-confusing-arrow-updates">The <code class="language-plaintext highlighter-rouge">no-confusing-arrow</code> rule is now more lenient by default</a></li>
  <li><a href="#overrides-dotfiles">Overrides in a config file can now match dotfiles</a></li>
  <li><a href="#overrides-precedence">Overrides in an extended config file can now be overridden by a parent config file</a></li>
  <li><a href="#globals-validation">Configuration values for globals are now validated</a></li>
  <li><a href="#experimental-object-rest-spread">The deprecated <code class="language-plaintext highlighter-rouge">experimentalObjectRestSpread</code> option has been removed</a></li>
  <li><a href="#unicode-regexes">User-provided regular expressions in rule options are parsed with the unicode flag</a></li>
</ol>

<h3 id="breaking-changes-for-plugincustom-rule-developers">Breaking changes for plugin/custom rule developers</h3>

<ol>
  <li><a href="#plugin-documentation">Plugin authors may need to update installation instructions</a></li>
  <li><a href="#rule-tester-defaults"><code class="language-plaintext highlighter-rouge">RuleTester</code> now validates against invalid <code class="language-plaintext highlighter-rouge">default</code> keywords in rule schemas</a></li>
  <li><a href="#rule-tester-parser"><code class="language-plaintext highlighter-rouge">RuleTester</code> now requires an absolute path on <code class="language-plaintext highlighter-rouge">parser</code> option</a></li>
  <li><a href="#eslintExplicitGlobalComment">The <code class="language-plaintext highlighter-rouge">eslintExplicitGlobalComment</code> scope analysis property has been removed</a></li>
</ol>

<h3 id="breaking-changes-for-integration-developers">Breaking changes for integration developers</h3>

<ol>
  <li><a href="#package-loading-simplification">Plugins and shareable configs are no longer affected by ESLint’s location</a></li>
  <li><a href="#linter-parsers"><code class="language-plaintext highlighter-rouge">Linter</code> no longer tries to load missing parsers from the filesystem</a></li>
</ol>

<hr />

<h2 id="-nodejs-6-is-no-longer-supported"><a name="drop-node-6"></a> Node.js 6 is no longer supported</h2>

<p>As of April 2019, Node.js 6 will be at EOL and will no longer be receiving security updates. As a result, we have decided to drop support for it in ESLint v6. We now support the following versions of Node.js:</p>

<ul>
  <li>Node.js 8 (8.10.0 and above)</li>
  <li>Node.js 10 (10.13.0 and above)</li>
  <li>Anything above Node.js 11.10.1</li>
</ul>

<p><strong>To address:</strong> Make sure you upgrade to at least Node.js 8 when using ESLint v6. If you are unable to upgrade, we recommend continuing to use ESLint v5.x until you are able to upgrade Node.js.</p>

<p><strong>Related issue(s):</strong> <a href="https://github.com/eslint/eslint/issues/11456">eslint/eslint#11546</a></p>

<h2 id="-eslintrecommended-has-been-updated"><a name="eslint-recommended-changes"></a> <code class="language-plaintext highlighter-rouge">eslint:recommended</code> has been updated</h2>

<p>The following rules have been added to the <a href="https://eslint.org/docs/user-guide/configuring#using-eslintrecommended"><code class="language-plaintext highlighter-rouge">eslint:recommended</code></a> config:</p>

<ul>
  <li><a href="https://eslint.org/docs/rules/no-async-promise-executor"><code class="language-plaintext highlighter-rouge">no-async-promise-executor</code></a> disallows using an <code class="language-plaintext highlighter-rouge">async</code> function as the argument to the <code class="language-plaintext highlighter-rouge">Promise</code> constructor, which is usually a bug.</li>
  <li><a href="https://eslint.org/docs/rules/no-misleading-character-class"><code class="language-plaintext highlighter-rouge">no-misleading-character-class</code></a> reports character classes in regular expressions that might not behave as expected.</li>
  <li><a href="https://eslint.org/docs/rules/no-prototype-builtins"><code class="language-plaintext highlighter-rouge">no-prototype-builtins</code></a> reports method calls like <code class="language-plaintext highlighter-rouge">foo.hasOwnProperty("bar")</code> (which are a frequent source of bugs), and suggests that they be replaced with <code class="language-plaintext highlighter-rouge">Object.prototype.hasOwnProperty.call(foo, "bar")</code> instead.</li>
  <li><a href="https://eslint.org/docs/rules/no-shadow-restricted-names"><code class="language-plaintext highlighter-rouge">no-shadow-restricted-names</code></a> disallows shadowing variables like <code class="language-plaintext highlighter-rouge">undefined</code> (e.g. with code like <code class="language-plaintext highlighter-rouge">let undefined = 5;</code>), since is likely to confuse readers.</li>
  <li><a href="https://eslint.org/docs/rules/no-useless-catch"><code class="language-plaintext highlighter-rouge">no-useless-catch</code></a> reports <code class="language-plaintext highlighter-rouge">catch</code> clauses that are redundant and can be removed from the code without changing its behavior.</li>
  <li><a href="https://eslint.org/docs/rules/no-with"><code class="language-plaintext highlighter-rouge">no-with</code></a> disallows use of the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/with"><code class="language-plaintext highlighter-rouge">with</code> statement</a>, which can make code difficult to understand and cause compatibility problems.</li>
  <li><a href="https://eslint.org/docs/rules/require-atomic-updates"><code class="language-plaintext highlighter-rouge">require-atomic-updates</code></a> reports race condition bugs that can occur when reassigning variables in async functions.</li>
</ul>

<p>Additionally, the following rule has been <em>removed</em> from <code class="language-plaintext highlighter-rouge">eslint:recommended</code>:</p>

<ul>
  <li><a href="https://eslint.org/docs/rules/no-console"><code class="language-plaintext highlighter-rouge">no-console</code></a> disallows calling functions like <code class="language-plaintext highlighter-rouge">console.log</code>. While this rule is useful in many cases (e.g. to avoid inadvertently leaving debugging statements in production code), it is not as broadly applicable as the other rules in <code class="language-plaintext highlighter-rouge">eslint:recommended</code>, and it was a source of false positives in cases where <code class="language-plaintext highlighter-rouge">console.log</code> is acceptable (e.g. in CLI applications).</li>
</ul>

<p>Finally, in ESLint v5 <code class="language-plaintext highlighter-rouge">eslint:recommended</code> would explicitly disable all core rules that were not considered “recommended”. This could cause confusing behavior if <code class="language-plaintext highlighter-rouge">eslint:recommended</code> was loaded after another config, since <code class="language-plaintext highlighter-rouge">eslint:recommended</code> would have the effect of turning off some rules. In ESLint v6, <code class="language-plaintext highlighter-rouge">eslint:recommended</code> has no effect on non-recommended rules.</p>

<p><strong>To address:</strong> To mimic the <code class="language-plaintext highlighter-rouge">eslint:recommended</code> behavior from 5.x, you can explicitly disable/enable rules in a config file as follows:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"extends"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eslint:recommended"</span><span class="p">,</span><span class="w">

  </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"no-async-promise-executor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"off"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"no-misleading-character-class"</span><span class="p">:</span><span class="w"> </span><span class="s2">"off"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"no-prototype-builtins"</span><span class="p">:</span><span class="w"> </span><span class="s2">"off"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"no-shadow-restricted-names"</span><span class="p">:</span><span class="w"> </span><span class="s2">"off"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"no-useless-catch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"off"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"no-with"</span><span class="p">:</span><span class="w"> </span><span class="s2">"off"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"require-atomic-updates"</span><span class="p">:</span><span class="w"> </span><span class="s2">"off"</span><span class="p">,</span><span class="w">

    </span><span class="nl">"no-console"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>In rare cases (if you were relying on the previous behavior where <code class="language-plaintext highlighter-rouge">eslint:recommended</code> disables core rules), you might need to disable additional rules to restore the previous behavior.</p>

<p><strong>Related issue(s):</strong> <a href="https://github.com/eslint/eslint/issues/10768">eslint/eslint#10768</a>, <a href="https://github.com/eslint/eslint/issues/10873">eslint/eslint#10873</a></p>

<h2 id="-plugins-and-shareable-configs-are-no-longer-affected-by-eslints-location"><a name="package-loading-simplification"></a> Plugins and shareable configs are no longer affected by ESLint’s location</h2>

<p>Previously, ESLint loaded plugins relative to the location of the ESLint package itself. As a result, we suggested that users with global ESLint installations should also install plugins globally, and users with local ESLint installations should install plugins locally. However, due to a design bug, this strategy caused ESLint to randomly fail to load plugins and shareable configs under certain circumstances, particularly when using package management tools like <a href="https://github.com/lerna/lerna"><code class="language-plaintext highlighter-rouge">lerna</code></a> and <a href="https://yarnpkg.com/lang/en/docs/pnp/">Yarn Plug n’ Play</a>.</p>

<p>As a rule of thumb: With ESLint v6, plugins should always be installed locally, even if ESLint was installed globally. More precisely, ESLint v6 resolves plugins relative to the end user’s project by default, and always resolves shareable configs and parsers relative to the location of the config file that imports them.</p>

<p><strong>To address:</strong> If you use a global installation of ESLint (e.g. installed with <code class="language-plaintext highlighter-rouge">npm install eslint --global</code>) along with plugins, you should install those plugins locally in the projects where you run ESLint. If your config file extends shareable configs and/or parsers, you should ensure that those packages are installed as dependencies of the project containing the config file.</p>

<p>If you use a config file located outside of a local project (with the <code class="language-plaintext highlighter-rouge">--config</code> flag), consider installing the plugins as dependencies of that config file, and setting the <a href="./command-line-interface#--resolve-plugins-relative-to"><code class="language-plaintext highlighter-rouge">--resolve-plugins-relative-to</code></a> flag to the location of the config file.</p>

<p><strong>Related issue(s):</strong> <a href="https://github.com/eslint/eslint/issues/10125">eslint/eslint#10125</a>, <a href="https://github.com/eslint/rfcs/pull/7">eslint/rfcs#7</a></p>

<h2 id="-the-default-parser-now-validates-options-more-strictly"><a name="espree-validation"></a> The default parser now validates options more strictly</h2>

<p><code class="language-plaintext highlighter-rouge">espree</code>, the default parser used by ESLint, will now raise an error in the following cases:</p>

<ul>
  <li>The <code class="language-plaintext highlighter-rouge">ecmaVersion</code> parser option is set to something other than a number, such as the string <code class="language-plaintext highlighter-rouge">"2015"</code>. (Previously, a non-number option would simply be ignored.)</li>
  <li>The <code class="language-plaintext highlighter-rouge">sourceType: "module"</code> parser option is set while <code class="language-plaintext highlighter-rouge">ecmaVersion</code> is set to <code class="language-plaintext highlighter-rouge">5</code> or left unspecified. (Previously, setting <code class="language-plaintext highlighter-rouge">sourceType: "module"</code> would implicitly cause <code class="language-plaintext highlighter-rouge">ecmaVersion</code> to be set to a minimum of 2015, which could be surprising.)</li>
  <li>The <code class="language-plaintext highlighter-rouge">sourceType</code> is set to anything other than <code class="language-plaintext highlighter-rouge">"script"</code> or <code class="language-plaintext highlighter-rouge">"module"</code>.</li>
</ul>

<p><strong>To address:</strong> If your config sets <code class="language-plaintext highlighter-rouge">ecmaVersion</code> to something other than a number, you can restore the previous behavior by removing <code class="language-plaintext highlighter-rouge">ecmaVersion</code>. (However, you may want to double-check that your config is actually working as expected.) If your config sets <code class="language-plaintext highlighter-rouge">parserOptions: { sourceType: "module" }</code> without also setting <code class="language-plaintext highlighter-rouge">parserOptions.ecmaVersion</code>, you should add <code class="language-plaintext highlighter-rouge">parserOptions: { ecmaVersion: 2015 }</code> to restore the previous behavior.</p>

<p><strong>Related issue(s):</strong> <a href="https://github.com/eslint/eslint/issues/9687">eslint/eslint#9687</a>, <a href="https://github.com/eslint/espree/issues/384">eslint/espree#384</a></p>

<h2 id="-the-no-redeclare-rule-is-now-more-strict-by-default"><a name="no-redeclare-updates"></a> The <code class="language-plaintext highlighter-rouge">no-redeclare</code> rule is now more strict by default</h2>

<p>The default options for the <a href="https://eslint.org/docs/rules/no-redeclare"><code class="language-plaintext highlighter-rouge">no-redeclare</code></a> rule have changed from <code class="language-plaintext highlighter-rouge">{ builtinGlobals: false }</code> to <code class="language-plaintext highlighter-rouge">{ builtinGlobals: true }</code>. Additionally, the <code class="language-plaintext highlighter-rouge">no-redeclare</code> rule will now report an error for globals enabled by comments like <code class="language-plaintext highlighter-rouge">/* global foo */</code> if those globals were already enabled through configuration anyway.</p>

<p><strong>To address:</strong></p>

<p>To restore the previous options for the rule, you can configure it as follows:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"no-redeclare"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"error"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"builtinGlobals"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Additionally, if you see new errors for <code class="language-plaintext highlighter-rouge">global</code> comments in your code, you should remove those comments.</p>

<p><strong>Related issue(s):</strong> <a href="https://github.com/eslint/eslint/issues/11370">eslint/eslint#11370</a>, <a href="https://github.com/eslint/eslint/issues/11405">eslint/eslint#11405</a></p>

<h2 id="-the-comma-dangle-rule-is-now-more-strict-by-default"><a name="comma-dangle-updates"></a> The <code class="language-plaintext highlighter-rouge">comma-dangle</code> rule is now more strict by default</h2>

<p>Previously, the <a href="https://eslint.org/docs/rules/comma-dangle"><code class="language-plaintext highlighter-rouge">comma-dangle</code></a> rule would ignore trailing function arguments and parameters, unless explicitly configured to check for function commas. In ESLint v6, function commas are treated the same way as other types of trailing commas.</p>

<p><strong>To address:</strong> You can restore the previous default behavior of the rule with:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"comma-dangle"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"error"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"arrays"</span><span class="p">:</span><span class="w"> </span><span class="s2">"never"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"objects"</span><span class="p">:</span><span class="w"> </span><span class="s2">"never"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"imports"</span><span class="p">:</span><span class="w"> </span><span class="s2">"never"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"exports"</span><span class="p">:</span><span class="w"> </span><span class="s2">"never"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"functions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ignore"</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>To restore the previous behavior of a string option like <code class="language-plaintext highlighter-rouge">"always-multiline"</code>, replace <code class="language-plaintext highlighter-rouge">"never"</code> with <code class="language-plaintext highlighter-rouge">"always-multiline"</code> in the example above.</p>

<p><strong>Related issue(s):</strong> <a href="https://github.com/eslint/eslint/issues/11502">eslint/eslint#11502</a></p>

<h2 id="-the-no-confusing-arrow-rule-is-now-more-lenient-by-default"><a name="no-confusing-arrow-updates"></a> The <code class="language-plaintext highlighter-rouge">no-confusing-arrow</code> rule is now more lenient by default</h2>

<p>The default options for the <a href="https://eslint.org/docs/rules/no-confusing-arrow"><code class="language-plaintext highlighter-rouge">no-confusing-arrow</code></a> rule have changed from <code class="language-plaintext highlighter-rouge">{ allowParens: false }</code> to <code class="language-plaintext highlighter-rouge">{ allowParens: true }</code>.</p>

<p><strong>To address:</strong> You can restore the previous default behavior of the rule with:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"no-confusing-arrow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"error"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"allowParens"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><strong>Related issue(s):</strong> <a href="https://github.com/eslint/eslint/issues/11503">eslint/eslint#11503</a></p>

<h2 id="-overrides-in-a-config-file-can-now-match-dotfiles"><a name="overrides-dotfiles"></a> Overrides in a config file can now match dotfiles</h2>

<p>Due to a bug, the glob patterns in a <code class="language-plaintext highlighter-rouge">files</code> list in an <code class="language-plaintext highlighter-rouge">overrides</code> section of a config file would never match dotfiles, making it impossible to have overrides apply to files starting with a dot. This bug has been fixed in ESLint v6.</p>

<p><strong>To address:</strong> If you don’t want dotfiles to be matched by an override, consider adding something like <code class="language-plaintext highlighter-rouge">excludedFiles: [".*"]</code> to that <code class="language-plaintext highlighter-rouge">overrides</code> section. See the <a href="https://eslint.org/docs/user-guide/configuring#configuration-based-on-glob-patterns">documentation</a> for more details.</p>

<p><strong>Related issue(s):</strong> <a href="https://github.com/eslint/eslint/issues/11201">eslint/eslint#11201</a></p>

<h2 id="-overrides-in-an-extended-config-file-can-now-be-overridden-by-a-parent-config-file"><a name="overrides-precedence"></a> Overrides in an extended config file can now be overridden by a parent config file</h2>

<p>Due to a bug, it was previously the case that an <code class="language-plaintext highlighter-rouge">overrides</code> block in a shareable config had precedence over the top level of a parent config. For example, with the following config setup, the <code class="language-plaintext highlighter-rouge">semi</code> rule would end up enabled even though it was explicitly disabled in the end user’s config:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// .eslintrc.js</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">extends</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">],</span>
  <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">semi</span><span class="p">:</span> <span class="dl">"</span><span class="s2">off</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// eslint-config-foo/index.js</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">overrides</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">files</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">*.js</span><span class="dl">"</span><span class="p">],</span>
    <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">semi</span><span class="p">:</span> <span class="dl">"</span><span class="s2">error</span><span class="dl">"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p>In ESLint v6.0.0, a parent config always has precedence over extended configs, even with <code class="language-plaintext highlighter-rouge">overrides</code> blocks.</p>

<p><strong>To address:</strong> We expect the impact of this issue to be very low because most shareable configs don’t use <code class="language-plaintext highlighter-rouge">overrides</code> blocks. However, if you use a shareable config with <code class="language-plaintext highlighter-rouge">overrides</code> blocks, you might encounter a change in behavior due to something that is explicitly specified in your config but was inactive until now. If you would rather inherit the behavior from the shareable config, simply remove the corresponding entry from your own config. (In the example above, the previous behavior could be restored by removing <code class="language-plaintext highlighter-rouge">semi: "off"</code> from <code class="language-plaintext highlighter-rouge">.eslintrc.js</code>.)</p>

<p><strong>Related issue(s):</strong> <a href="https://github.com/eslint/eslint/issues/11510">eslint/eslint#11510</a></p>

<h2 id="-configuration-values-for-globals-are-now-validated"><a name="globals-validation"></a> Configuration values for globals are now validated</h2>

<p>Previously, when configuring a set of global variables with an object, it was possible to use anything as the values of the object. An unknown value would be treated the same as <code class="language-plaintext highlighter-rouge">"writable"</code>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// .eslintrc.js</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">globals</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">foo</span><span class="p">:</span> <span class="dl">"</span><span class="s2">readonly</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">bar</span><span class="p">:</span> <span class="dl">"</span><span class="s2">writable</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">baz</span><span class="p">:</span> <span class="dl">"</span><span class="s2">hello!</span><span class="dl">"</span> <span class="c1">// ???</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p>With this change, any unknown values in a <code class="language-plaintext highlighter-rouge">globals</code> object result in a config validation error.</p>

<p><strong>To address:</strong> If you see config validation errors related to globals after updating, ensure that all values configured for globals are either <code class="language-plaintext highlighter-rouge">readonly</code>, <code class="language-plaintext highlighter-rouge">writable</code>, or <code class="language-plaintext highlighter-rouge">off</code>. (ESLint also accepts some alternate spellings and variants for compatibility.)</p>

<h2 id="-the-depreacted-experimentalobjectrestspread-option-has-been-removed"><a name="experimental-object-rest-spread"></a> The depreacted <code class="language-plaintext highlighter-rouge">experimentalObjectRestSpread</code> option has been removed</h2>

<p>Previously, when using the default parser, a config could use the <code class="language-plaintext highlighter-rouge">experimentalObjectRestSpread</code> option to enable parsing support for object rest/spread properties:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"parserOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"ecmaFeatures"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"experimentalObjectRestSpread"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Since ESLint v5, <code class="language-plaintext highlighter-rouge">ecmaFeatures: { experimentalObjectRestSpread: true }</code> has been equivalent to <code class="language-plaintext highlighter-rouge">ecmaVersion: 2018</code>, and has also emitted a deprecation warning. In ESLint v6, the <code class="language-plaintext highlighter-rouge">experimentalObjectRestSpread</code> feature has been removed entirely and has no effect. If your config was relying on <code class="language-plaintext highlighter-rouge">experimentalObjectRestSpread</code> to enable ES2018 parsing, you might start seeing parsing errors for recent syntax.</p>

<p><strong>To address:</strong> If you use the <code class="language-plaintext highlighter-rouge">experimentalObjectRestSpread</code> option, you should change your config to contain this instead:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"parserOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"ecmaVersion"</span><span class="p">:</span><span class="w"> </span><span class="mi">2018</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>If you’re not sure which config file needs to be updated, it may be useful to run ESLint v5 and look at what config file is mentioned in the deprecation warning.</p>

<p><strong>Related issue(s):</strong> <a href="https://github.com/eslint/eslint/issues/9990">eslint/eslint#9990</a></p>

<h2 id="-user-provided-regular-expressions-in-rule-options-are-parsed-with-the-unicode-flag"><a name="unicode-regexes"></a> User-provided regular expressions in rule options are parsed with the unicode flag</h2>

<p>Rules like <a href="/docs/rules/max-len"><code class="language-plaintext highlighter-rouge">max-len</code></a> accept a string option which is interpreted as a regular expression. In ESLint v6.0.0, these regular expressions are interpreted with the <a href="https://mathiasbynens.be/notes/es6-unicode-regex">unicode flag</a>, which should exhibit more reasonable behavior when matching characters like astral symbols. Unicode regexes also validate escape sequences more strictly than non-unicode regexes.</p>

<p><strong>To address:</strong> If you get rule option validation errors after upgrading, ensure that any regular expressions in your rule options have no invalid escape sequences.</p>

<p><strong>Related issue(s):</strong> <a href="https://github.com/eslint/eslint/issues/11423">eslint/eslint#11423</a></p>

<hr />

<h2 id="-plugin-authors-may-need-to-update-installation-instructions"><a name="plugin-documentation"></a> Plugin authors may need to update installation instructions</h2>

<p>If you maintain a plugin and provide installation instructions, you should ensure that the installation instructions are up to date with the <a href="#package-loading-simplification">user-facing changes to how plugins are loaded</a>. In particular, if your plugin was generated with the <a href="https://github.com/eslint/generator-eslint"><code class="language-plaintext highlighter-rouge">generator-eslint</code></a> package, it likely contains outdated instructions for how to use the plugin with global ESLint installations.</p>

<p><strong>Related issue(s):</strong> <a href="https://github.com/eslint/rfcs/pull/7">eslint/rfcs#7</a></p>

<h2 id="-ruletester-now-validates-against-invalid-default-keywords-in-rule-schemas"><a name="rule-tester-defaults"></a> <code class="language-plaintext highlighter-rouge">RuleTester</code> now validates against invalid <code class="language-plaintext highlighter-rouge">default</code> keywords in rule schemas</h2>

<p>In some cases, rule schemas can use the <code class="language-plaintext highlighter-rouge">default</code> keyword to automatically specify default values for rule options. However, the <code class="language-plaintext highlighter-rouge">default</code> keyword is only effective in certain schema locations, and is ignored elsewhere, which creates a risk of bugs if a rule incorrectly expects a default value to be provided as a rule option. In ESLint v6.0.0, <code class="language-plaintext highlighter-rouge">RuleTester</code> will raise an error if a rule has an invalid <code class="language-plaintext highlighter-rouge">default</code> keyword in its schema.</p>

<p><strong>To address:</strong> If <code class="language-plaintext highlighter-rouge">RuleTester</code> starts reporting an error about an invalid default, you can remove the <code class="language-plaintext highlighter-rouge">default</code> property at the indicated location in your rule schema, and the rule will behave the same way. (If this happens, you might also want to verify that the rule behaves correctly when no option value is provided in that location.)</p>

<p><strong>Related issue(s):</strong> <a href="https://github.com/eslint/eslint/issues/11473">eslint/eslint#11473</a></p>

<h2 id="-ruletester-now-requires-an-absolute-path-on-parser-option"><a name="rule-tester-parser"></a> <code class="language-plaintext highlighter-rouge">RuleTester</code> now requires an absolute path on <code class="language-plaintext highlighter-rouge">parser</code> option</h2>

<p>To use custom parsers in tests, we could use <code class="language-plaintext highlighter-rouge">parser</code> property with a package name or file path. However, if a package name was given, it’s unclear where the tester should load the parser package from because the tester doesn’t know which files are running the tester. In ESLint v6.0.0, <code class="language-plaintext highlighter-rouge">RuleTester</code> disallows <code class="language-plaintext highlighter-rouge">parser</code> property with a package name.</p>

<p><strong>To address:</strong> If you use <code class="language-plaintext highlighter-rouge">parser</code> property with package names in test cases, update it with <code class="language-plaintext highlighter-rouge">require.resolve()</code> function to resolve the package name to the absolute path to the package.</p>

<p><strong>Related issue(s):</strong> <a href="https://github.com/eslint/eslint/issues/11728">eslint/eslint#11728</a>, <a href="https://github.com/eslint/eslint/issues/10125">eslint/eslint#10125</a>, <a href="https://github.com/eslint/rfcs/pull/7">eslint/rfcs#7</a></p>

<h2 id="-the-eslintexplicitglobalcomment-scope-analysis-property-has-been-removed"><a name="eslintExplicitGlobalComment"></a> The <code class="language-plaintext highlighter-rouge">eslintExplicitGlobalComment</code> scope analysis property has been removed</h2>

<p>Previously, ESLint would add an <code class="language-plaintext highlighter-rouge">eslintExplicitGlobalComment</code> property to <code class="language-plaintext highlighter-rouge">Variable</code> objects in scope analysis to indicate that a variable was introduced as a result of a <code class="language-plaintext highlighter-rouge">/* global */</code> comment. This property was undocumented, and the ESLint team was unable to find any usage of the property outside of ESLint core. The property has been removed in ESLint v6, and replaced with the <code class="language-plaintext highlighter-rouge">eslintExplicitGlobalComments</code> property, which can contain a list of all <code class="language-plaintext highlighter-rouge">/* global */</code> comments if a variable was declared with more than one of them.</p>

<p><strong>To address:</strong> If you maintain a rule that uses the <code class="language-plaintext highlighter-rouge">eslintExplicitGlobalComment</code> property, update it to use the <code class="language-plaintext highlighter-rouge">eslintExplicitGlobalComments</code> property as a list instead.</p>

<p><strong>Related issue(s):</strong> <a href="https://github.com/eslint/rfcs/pull/17">eslint/rfcs#17</a></p>

<hr />

<h2 id="-linter-no-longer-tries-to-load-missing-parsers-from-the-filesystem"><a name="linter-parsers"></a> <code class="language-plaintext highlighter-rouge">Linter</code> no longer tries to load missing parsers from the filesystem</h2>

<p>Previously, when linting code with a parser that had not been previously defined, the <code class="language-plaintext highlighter-rouge">Linter</code> API would attempt to load the parser from the filesystem. However, this behavior was confusing because <code class="language-plaintext highlighter-rouge">Linter</code> never access the filesystem in any other cases, and it was difficult to ensure that the correct parser would be found when loading the parser from the filesystem.</p>

<p>In ESLint v6, <code class="language-plaintext highlighter-rouge">Linter</code> will no longer perform any filesystem operations, including loading parsers.</p>

<p><strong>To address:</strong> If you’re using <code class="language-plaintext highlighter-rouge">Linter</code> with a custom parser, use <a href="https://eslint.org/docs/developer-guide/nodejs-api#linterdefineparser"><code class="language-plaintext highlighter-rouge">Linter#defineParser</code></a> to explicitly define the parser before linting any code.</p>

<p><strong>Related issue(s):</strong> <a href="https://github.com/eslint/rfcs/pull/7">eslint/rfcs#7</a></p>

  </article>
</main>

    <hr>

    <div class="container">

      <footer>
        <ul class="list-inline">
          
            <li><a href="https://github.com/eslint/eslint/edit/master/docs/user-guide/migrating-to-6.0.0.md">Edit this page</a></li>
          
          <li><a href="https://groups.google.com/group/eslint">Mailing List</a></li>
          <li><a href="https://github.com/eslint/eslint">GitHub</a></li>
          <li><a href="https://twitter.com/geteslint">Twitter</a></li>
          <li><a href="https://gitter.im/eslint/eslint">Chat Room</a></li>
          <li>Copyright JS Foundation and other contributors, <a href="https://js.foundation">https://js.foundation/</a></li>
        </ul>
      </footer>
    </div><!-- /.container -->

  <link href="/styles/vendor/font.css" rel="stylesheet">
  <script src="/js/vendor/jquery-1.10.2.min.js" defer></script>
  <script src="/js/vendor/bootstrap-native.min.js" defer></script>
  <script src="/js/vendor/anchor.min.js"></script>
      <!-- at the end of the BODY -->
  <script type="text/javascript" src="/js/vendor/docsearch.min.js"></script>
  <script type="text/javascript"> docsearch({
    apiKey: '891b0e977d96c762a3821e0c00172ac9',
    indexName: 'eslint',
    inputSelector: '#eslint-search-input',
    algoliaOptions: { 'facetFilters': [["tags:docs", "tags:blog"]] },
    debug: false // Set debug to true if you want to inspect the dropdown
  });
  var htmlClassList = document.documentElement.classList;
  htmlClassList.remove("no-js");
  htmlClassList.add("js");
  </script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      anchors.add('.doc h2, .doc h3, .doc h4, .blog h2, .blog h3, .blog h4');
      
	
	    var langs = {mixed: '中英文',zh: '中文',en: '英文'};
	    var last = localStorage.getItem('lang') || 'zh';

	    if (last in langs) {
	      $('.lang-chooser').html(langs[last]); 
	      $('.doc').removeClass(function(index,clz){
	          return clz.slice(3);
	      }).addClass('lang-' + last);
	    }

	    $('.navbar-left').show();

	    $('.lang-type').on('click', function() {
	        var $this = $(this),
	            type = $this.data('lang'),
	            lang = $this.html();

	        localStorage.setItem('lang', type);

	        $('.lang-chooser').html(lang); 
	        $('.doc').removeClass(function(index,clz){
	            return clz.slice(3);
	        }).addClass('lang-' + type);
	    });
	
  });
	
  </script>
  <style type="text/css">#cnzz_stat_icon_1278836435 {display: none;}</style>
  <script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1278836435'%3E%3C/span%3E%3Cscript src='https://s4.cnzz.com/z_stat.php%3Fid%3D1278836435%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
  
</body>
</html>

