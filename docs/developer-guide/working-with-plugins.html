<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="keywords" content="ESLint中文, ESLint中文网, ESLint规则, ESLint配置, 代码检测, 代码质量, JavaScript, Linter, Linting, Pluggable, Configurable, Code Quality">
  <meta name="description" content="ESLint中文官网, ESLint中英文对照, JavaScript代码检测, JavaScript代码风格检测, JavaScript代码自动格式化,A pluggable and configurable linter tool for identifying and reporting on patterns in JavaScript. Maintain your code quality with ease.">
  <meta name="theme-color" content="#463fd4"/>
  <meta property="og:locale" content="zh_CN">
  <meta property="og:site_name" content="ESLint中文">
  <meta property="og:title" content="Working with Plugins">
  <meta property="og:url" content="http://localhost:4000/docs/developer-guide/working-with-plugins">
  <meta property="og:image" content="http://localhost:4000/img/favicon.512x512.png">

  <meta name="twitter:site" content="@geteslint">
  <meta name="twitter:title" content="Working with Plugins">
  <meta name="twitter:description" content="ESLint中文官网, ESLint中英文对照, JavaScript代码检测, JavaScript代码风格检测, JavaScript代码自动格式化,A pluggable and configurable linter tool for identifying and reporting on patterns in JavaScript. Maintain your code quality with ease.">
  <meta name="twitter:url" content="http://localhost:4000/docs/developer-guide/working-with-plugins">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:image" content="http://localhost:4000/img/favicon.512x512.png">

    
        <title>Working with Plugins - ESLint中文</title>
    


  <link href="http://localhost:4000/docs/developer-guide/working-with-plugins" rel="canonical" />
  <link rel="stylesheet" href="/styles/main.css"/>
  
  <link rel="stylesheet" href="/styles/mixed.css"/>
  
  <link rel='manifest' href='http://localhost:4000/manifest.json'>
  <link rel="icon" href="http://localhost:4000/img/favicon.512x512.png">
  <link rel="alternate" type="application/rss+xml" title="ESLint中文" href="http://localhost:4000/feed.xml">
  <!-- at the end of the HEAD -->
  <link rel="stylesheet" href="/styles/vendor/docsearch.min.css" />
</head>
<body>

<input type="checkbox" id="eslint-toggle-search" class="eslint-toggle-search-checkbox" />
<header class="navbar navbar-default navbar-demo navbar-fixed-top eslint-nav" id="top" role="banner">
  <div class="container">

    <a href="http://localhost:4000/" class="navbar-brand"><img alt="ESLint" src="http://localhost:4000/img/logo.svg" itemprop="image">ESLint</a>

    <div class="eslint-navbar-toggles">
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#eslint-navbar" aria-controls="eslint-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <label for="eslint-toggle-search" class="navbar-toggle eslint-toggle-search-open">
        <span class="sr-only">Open search</span>
        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
      </label>
    </div>

    <nav id="eslint-navbar" class="collapse navbar-collapse eslint-navbar">
      
      <ul class="nav navbar-nav navbar-left">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><span class="lang-chooser">中文</span><span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a class="lang-type" data-lang="zh" href="javascript:;">中文</a></li>
            <li><a class="lang-type" data-lang="mixed" href="javascript:;">中英文</a></li>
            <li><a class="lang-type" data-lang="en" href="javascript:;">英文</a></li>
          </ul>
        </li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="http://localhost:4000/docs/user-guide" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">用户指南<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="http://localhost:4000/docs/user-guide/getting-started">开始</a></li>
            <li><a href="http://localhost:4000/docs/user-guide/configuring">配置</a></li>
            <li><a href="http://localhost:4000/docs/user-guide/command-line-interface">命令行</a></li>
            <li><a href="http://localhost:4000/docs/rules/">规则</a></li>
            <li><a href="http://localhost:4000/docs/user-guide/formatters">Formatters</a></li>
            <li><a href="http://localhost:4000/docs/user-guide/integrations">集成</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="http://localhost:4000/docs/developer-guide" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">开发指南<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="http://localhost:4000/docs/developer-guide/architecture">架构</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/source-code">源码</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/development-environment">开发环境</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/contributing">参与</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/unit-tests">单元测试</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/working-with-rules">创建规则</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/working-with-custom-formatters">自定义格式化器</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/working-with-custom-parsers">自定义解析器</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/working-with-plugins">开发插件</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/shareable-configs">可共享的配置</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/nodejs-api">Node.js API</a></li>
            <li><a href="http://localhost:4000/docs/maintainer-guide">维护者指南</a></li>
          </ul>
        </li>
        <li><a href="http://localhost:4000/blog/">博客</a></li>
        <li class="dropdown">
          <a href="http://localhost:4000/demo" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">演示<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="http://localhost:4000/demo/">ESLint Demo</a></li>
            <li><a href="http://localhost:4000/parser/">Espree Demo</a></li>
          </ul>
        </li>
        <!-- <li><a href="http://localhost:4000/docs/about/">About</a></li> -->
        <li class="dropdown">
          <a href="http://localhost:4000/docs/about/" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">关于<span
              class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="http://localhost:4000/users/">谁在使用 ESLint?</a></li>
            <li><a href="http://localhost:4000/team/">关于 Team</a></li>
            <li><a href="http://localhost:4000/docs/about/">关于 ESLint</a></li>
          </ul>
        </li>
      </ul>

      <label for="eslint-toggle-search" class="navbar-toggle eslint-toggle-search-open">
        <span class="sr-only">Open search</span>
        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
      </label>

      <div class="navbar-form navbar-right eslint-search" role="search">
        <div class="input-group">
          <label class="sr-only" aria-label="Search" for="eslint-search-input">Search</label>
          <div class="eslint-search-input-wrapper">
            <input type="text" class="form-control" id="eslint-search-input" accesskey="s" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search the docs...">
            <label for="eslint-toggle-search" class="eslint-toggle-search-close">
              <span class="sr-only">Close search</span>
              <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
            </label>
          </div>
        </div>
      </div>
    </nav>

  </div><!-- /.container -->
</header><!-- /.navbar -->

<main class="doc lang-zh">
  <article class="container">
    <!-- Note: No pull requests accepted for this file. See README.md in the root directory for details. -->

<h1 id="working-with-plugins">Working with Plugins</h1>

<p>Each plugin is an npm module with a name in the format of <code class="language-plaintext highlighter-rouge">eslint-plugin-&lt;plugin-name&gt;</code>, such as <code class="language-plaintext highlighter-rouge">eslint-plugin-jquery</code>. You can also use scoped packages in the format of <code class="language-plaintext highlighter-rouge">@&lt;scope&gt;/eslint-plugin-&lt;plugin-name&gt;</code> such as <code class="language-plaintext highlighter-rouge">@jquery/eslint-plugin-jquery</code>.</p>

<p>每个插件是一个命名格式为 <code class="language-plaintext highlighter-rouge">eslint-plugin-&lt;plugin-name&gt;</code> 的 npm 模块，比如 <code class="language-plaintext highlighter-rouge">eslint-plugin-jquery</code>。你也可以用这样的格式 <code class="language-plaintext highlighter-rouge">@&lt;scope&gt;/eslint-plugin-&lt;plugin-name&gt;</code> 限定在包作用域下，比如 <code class="language-plaintext highlighter-rouge">@jquery/eslint-plugin-jquery</code>。</p>

<h2 id="create-a-plugin">Create a Plugin</h2>

<p>The easiest way to start creating a plugin is to use the <a href="https://www.npmjs.com/package/generator-eslint">Yeoman generator</a>. The generator will guide you through setting up the skeleton of a plugin.</p>

<p>创建一个插件最简单的方式是使用 <a href="https://www.npmjs.com/package/generator-eslint">Yeoman generator</a>。它将引导你完成插件框架的设置。</p>

<h3 id="rules-in-plugins">Rules in Plugins</h3>

<p>Plugins can expose additional rules for use in ESLint. To do so, the plugin must export a <code class="language-plaintext highlighter-rouge">rules</code> object containing a key-value mapping of rule ID to rule. The rule ID does not have to follow any naming convention (so it can just be <code class="language-plaintext highlighter-rouge">dollar-sign</code>, for instance).</p>

<p>在 ESLint 中，插件可以暴露额外的规则以供使用。为此，插件必须输出一个 <code class="language-plaintext highlighter-rouge">rules</code>对象，包含规则 ID 和对应规则的一个键值对。这个规则 ID 不需要遵循任何命名规范（所以，比如，它可以是 <code class="language-plaintext highlighter-rouge">dollar-sign</code>）。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">dollar-sign</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">create</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// rule implementation ...</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p>To use the rule in ESLint, you would use the unprefixed plugin name, followed by a slash, followed by the rule name. So if this plugin were named <code class="language-plaintext highlighter-rouge">eslint-plugin-myplugin</code>, then in your configuration you’d refer to the rule by the name <code class="language-plaintext highlighter-rouge">myplugin/dollar-sign</code>. Example: <code class="language-plaintext highlighter-rouge">"rules": {"myplugin/dollar-sign": 2}</code>.</p>

<p>如果要在 ESLint 中使用插件中的规则，你可以使用不带前缀的插件名，后跟一个 <code class="language-plaintext highlighter-rouge">/</code>，然后是规则名。所以如果这个插件是 <code class="language-plaintext highlighter-rouge">eslint-plugin-myplugin</code>，那么在你的配置中你可以使用 <code class="language-plaintext highlighter-rouge">myplugin/dollar-sign</code> 来引用其中的规则。示例：<code class="language-plaintext highlighter-rouge">"rules": {"myplugin/dollar-sign": "error"}</code>。</p>

<h3 id="environments-in-plugins">Environments in Plugins</h3>

<p>Plugins can expose additional environments for use in ESLint. To do so, the plugin must export an <code class="language-plaintext highlighter-rouge">environments</code> object. The keys of the <code class="language-plaintext highlighter-rouge">environments</code> object are the names of the different environments provided and the values are the environment settings. For example:</p>

<p>插件可以暴露额外的环境以在 ESLint 中使用。为此，插件必须输出一个 <code class="language-plaintext highlighter-rouge">environments</code> 对象。<code class="language-plaintext highlighter-rouge">environments</code> 对象的 key 是不同环境提供的名字，值是不同环境的设置。例如：</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">environments</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">jquery</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">globals</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">$</span><span class="p">:</span> <span class="kc">false</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p>There’s a <code class="language-plaintext highlighter-rouge">jquery</code> environment defined in this plugin. To use the environment in ESLint, you would use the unprefixed plugin name, followed by a slash, followed by the environment name. So if this plugin were named <code class="language-plaintext highlighter-rouge">eslint-plugin-myplugin</code>, then you would set the environment in your configuration to be <code class="language-plaintext highlighter-rouge">"myplugin/jquery"</code>.</p>

<p>在这个插件中，定义了一个 <code class="language-plaintext highlighter-rouge">jquery</code> 环境。为了在 ESLint 中使用这个环境，你可以使用不带前缀的插件名，后跟一个 <code class="language-plaintext highlighter-rouge">/</code>，然后是环境名。所以如果这个插件是 <code class="language-plaintext highlighter-rouge">eslint-plugin-myplugin</code>，那么在你的配置中设置环境为 <code class="language-plaintext highlighter-rouge">myplugin/jquery</code>。</p>

<p>Plugin environments can define the following objects:</p>

<p>插件环境定义以下对象：</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">globals</code> - acts the same <code class="language-plaintext highlighter-rouge">globals</code> in a configuration file. The keys are the names of the globals and the values are <code class="language-plaintext highlighter-rouge">true</code> to allow the global to be overwritten and <code class="language-plaintext highlighter-rouge">false</code> to disallow.</li>
  <li><code class="language-plaintext highlighter-rouge">globals</code> - 同配置文件中的 <code class="language-plaintext highlighter-rouge">globals</code> 一样。key 是全局变量的名字，值为 <code class="language-plaintext highlighter-rouge">true</code>允许全局变量被覆盖，<code class="language-plaintext highlighter-rouge">false</code> 不允许覆盖。</li>
  <li><code class="language-plaintext highlighter-rouge">parserOptions</code> - acts the same as <code class="language-plaintext highlighter-rouge">parserOptions</code> in a configuration file.</li>
  <li><code class="language-plaintext highlighter-rouge">parserOptions</code> - 同配置文件中的 <code class="language-plaintext highlighter-rouge">parserOptions</code> 一样。</li>
</ol>

<h3 id="processors-in-plugins">Processors in Plugins</h3>

<p>You can also create plugins that would tell ESLint how to process files other than JavaScript. In order to create a processor, the object that is exported from your module has to conform to the following interface:</p>

<p>你也可以创建插件告诉 ESLint 如何处理 JavaScript 之外的文件。为了创建一个处理器，从你的模块中输出的对象必须符合以下接口：</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">processors</span><span class="p">:</span> <span class="p">{</span>

        <span class="c1">// assign to the file extension you want (.js, .jsx, .html, etc.)</span>
        <span class="dl">"</span><span class="s2">.ext</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
            <span class="c1">// takes text of the file and filename</span>
            <span class="na">preprocess</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">filename</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// here, you can strip out any non-JS content</span>
                <span class="c1">// and split into multiple strings to lint</span>

                <span class="k">return</span> <span class="p">[</span><span class="nx">string</span><span class="p">];</span>  <span class="c1">// return an array of strings to lint</span>
            <span class="p">},</span>

            <span class="c1">// takes a Message[][] and filename</span>
            <span class="na">postprocess</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">messages</span><span class="p">,</span> <span class="nx">filename</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// `messages` argument contains two-dimensional array of Message objects</span>
                <span class="c1">// where each top-level array item contains array of lint messages related</span>
                <span class="c1">// to the text that was returned in array from preprocess() method</span>

                <span class="c1">// you need to return a one-dimensional array of the messages you want to keep</span>
                <span class="k">return</span> <span class="nx">messages</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="p">},</span>

            <span class="na">supportsAutofix</span><span class="p">:</span> <span class="kc">true</span> <span class="c1">// (optional, defaults to false)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">preprocess</code> method takes the file contents and filename as arguments, and returns an array of strings to lint. The strings will be linted separately but still be registered to the filename. It’s up to the plugin to decide if it needs to return just one part, or multiple pieces. For example in the case of processing <code class="language-plaintext highlighter-rouge">.html</code> files, you might want to return just one item in the array by combining all scripts, but for <code class="language-plaintext highlighter-rouge">.md</code> file where each JavaScript block might be independent, you can return multiple items.</p>

<p><code class="language-plaintext highlighter-rouge">preprocess</code> 将文件内容和文件名称作为参数，返回一个要检查的字符串数组。这些字符串将被分别检查，但仍要注册到文件名。决定它需要返回的只是一部分还是多个块，取决于这个插件。例如，在处理<code class="language-plaintext highlighter-rouge">.html</code>文件时，通过合并所有的脚本，你可能想要返回数组中的一项，但是对于<code class="language-plaintext highlighter-rouge">.md</code>文件，每个 JavaScript 块可能是独立的，你可以返回多个项。</p>

<p>The <code class="language-plaintext highlighter-rouge">postprocess</code> method takes a two-dimensional array of arrays of lint messages and the filename. Each item in the input array corresponds to the part that was returned from the <code class="language-plaintext highlighter-rouge">preprocess</code> method. The <code class="language-plaintext highlighter-rouge">postprocess</code> method must adjust the locations of all errors to correspond to locations in the original, unprocessed code, and aggregate them into a single flat array and return it.</p>

<p><code class="language-plaintext highlighter-rouge">postprocess</code> 方法接受一个二维数组，包含检测消息和文件名。输入数组中的每一项都对应从 <code class="language-plaintext highlighter-rouge">preprocess</code> 方法返回的部分。<code class="language-plaintext highlighter-rouge">preprocess</code> 方法必须调整所有错误的位置，使其与原始的未处理的代码中的位置相对应，并将它们聚合成一个打平的数组并返回。</p>

<p>Reported problems have the following location information:</p>

<p>报告的问题有以下位置信息：</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">line</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span>
    <span class="nx">column</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span>

    <span class="nx">endLine</span><span class="p">?:</span> <span class="kr">number</span><span class="p">,</span>
    <span class="nx">endColumn</span><span class="p">?:</span> <span class="kr">number</span>
<span class="p">}</span>
</code></pre></div></div>

<p>By default, ESLint will not perform autofixes when a processor is used, even when the <code class="language-plaintext highlighter-rouge">--fix</code> flag is enabled on the command line. To allow ESLint to autofix code when using your processor, you should take the following additional steps:</p>

<p>默认情况下，当使用处理器时，ESLint 不会执行自动修复，即使在命令行上启用了 <code class="language-plaintext highlighter-rouge">--fix</code> 标志。要允许 ESLint 在使用处理器时自动修复代码，你应该采取以下额外步骤：</p>

<p>1.Update the <code class="language-plaintext highlighter-rouge">postprocess</code> method to additionally transform the <code class="language-plaintext highlighter-rouge">fix</code> property of reported problems. All autofixable problems will have a <code class="language-plaintext highlighter-rouge">fix</code> property, which is an object with the following schema:</p>

<p>1.更新 <code class="language-plaintext highlighter-rouge">postprocess</code> 方法，以额外转换报告问题的 <code class="language-plaintext highlighter-rouge">fix</code> 属性。所有可自动修复的问题都有一个 <code class="language-plaintext highlighter-rouge">fix</code> 属性，它是一个对象，模式如下:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">range</span><span class="p">:</span> <span class="p">[</span><span class="nx">number</span><span class="p">,</span> <span class="nx">number</span><span class="p">],</span>
    <span class="nx">text</span><span class="p">:</span> <span class="nx">string</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">range</code> property contains two indexes in the code, referring to the start and end location of a contiguous section of text that will be replaced. The <code class="language-plaintext highlighter-rouge">text</code> property refers to the text that will replace the given range.</p>

<p><code class="language-plaintext highlighter-rouge">range</code> 属性在代码中包含两个索引，表示将被替换的连续文本段的开始和结束位置。<code class="language-plaintext highlighter-rouge">text</code> 属性引用将替换给定范围的文本。</p>

<p>In the initial list of problems, the <code class="language-plaintext highlighter-rouge">fix</code> property will refer to a fix in the processed JavaScript. The <code class="language-plaintext highlighter-rouge">postprocess</code> method should transform the object to refer to a fix in the original, unprocessed file.</p>

<p>在最初的问题列表中，<code class="language-plaintext highlighter-rouge">fix</code> 属性将引用处理过的 JavaScript 中的修复。<code class="language-plaintext highlighter-rouge">postprocess</code> 方法应该将对象转换为引用原始的未处理的文件中的修复。</p>

<p>2.Add a <code class="language-plaintext highlighter-rouge">supportsAutofix: true</code> property to the processor.</p>

<p>2.向处理器添加 <code class="language-plaintext highlighter-rouge">supportsAutofix: true</code> 属性。</p>

<p>You can have both rules and processors in a single plugin. You can also have multiple processors in one plugin.
To support multiple extensions, add each one to the <code class="language-plaintext highlighter-rouge">processors</code> element and point them to the same object.</p>

<p>你可以在一个插件中同时拥有规则和处理器。你也可以一个插件中拥有多个处理器。
要支持多个扩展，请将每一个处理器添加到 <code class="language-plaintext highlighter-rouge">processors</code> 元素，然后将它们指向同一个对象。</p>

<h3 id="configs-in-plugins">Configs in Plugins</h3>

<p>You can bundle configurations inside a plugin by specifying them under the <code class="language-plaintext highlighter-rouge">configs</code> key. This can be useful when you want to provide not just code style, but also some custom rules to support it. Multiple configurations are supported per plugin. Note that it is not possible to specify a default configuration for a given plugin and that users must specify in their configuration file when they want to use one.</p>

<p>你可以在一个插件中在 <code class="language-plaintext highlighter-rouge">configs</code> 键下指定打包的配置。当你想提供不止代码风格，而且希望提供一些自定义规则来支持它时，会非常有用。每个插件支持多配置。注意不可能为给定的插件指定默认配置，当用户想要使用一个插件时，必须在配置文件中指定。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// eslint-plugin-myPlugin</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">configs</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">myConfig</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">myPlugin</span><span class="dl">"</span><span class="p">],</span>
            <span class="na">env</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">browser</span><span class="dl">"</span><span class="p">],</span>
            <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">semi</span><span class="p">:</span> <span class="dl">"</span><span class="s2">error</span><span class="dl">"</span><span class="p">,</span>
                <span class="dl">"</span><span class="s2">myPlugin/my-rule</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">error</span><span class="dl">"</span><span class="p">,</span>
                <span class="dl">"</span><span class="s2">eslint-plugin-myPlugin/another-rule</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">error</span><span class="dl">"</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="na">myOtherConfig</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">myPlugin</span><span class="dl">"</span><span class="p">],</span>
            <span class="na">env</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">node</span><span class="dl">"</span><span class="p">],</span>
            <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
                <span class="dl">"</span><span class="s2">myPlugin/my-rule</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">off</span><span class="dl">"</span><span class="p">,</span>
                <span class="dl">"</span><span class="s2">eslint-plugin-myPlugin/another-rule</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">off</span><span class="dl">"</span>
                <span class="dl">"</span><span class="s2">eslint-plugin-myPlugin/yet-another-rule</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">error</span><span class="dl">"</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p>If the example plugin above were called <code class="language-plaintext highlighter-rouge">eslint-plugin-myPlugin</code>, the <code class="language-plaintext highlighter-rouge">myConfig</code> and <code class="language-plaintext highlighter-rouge">myOtherConfig</code> configurations would then be usable by extending off of <code class="language-plaintext highlighter-rouge">"plugin:myPlugin/myConfig"</code> and <code class="language-plaintext highlighter-rouge">"plugin:myPlugin/myOtherConfig"</code>, respectively.</p>

<p>如果上面的示例插件名为 <code class="language-plaintext highlighter-rouge">eslint-plugin-myPlugin</code>，那么 <code class="language-plaintext highlighter-rouge">myConfig</code> 和 <code class="language-plaintext highlighter-rouge">myOtherConfig</code> 配置可以分别从 <code class="language-plaintext highlighter-rouge">"plugin:myPlugin/myConfig"</code> 和 <code class="language-plaintext highlighter-rouge">"plugin:myPlugin/myOtherConfig"</code> 扩展出来。</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"extends"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"plugin:myPlugin/myConfig"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<p><strong>Note:</strong> Please note that configuration will not enable any of the plugin’s rules by default, and instead should be treated as a standalone config. This means that you must specify your plugin name in the <code class="language-plaintext highlighter-rouge">plugins</code> array as well as any rules you want to enable that are part of the plugin. Any plugin rules must be prefixed with the short or long plugin name. See <a href="../user-guide/configuring#configuring-plugins">Configuring Plugins</a> for more information.</p>

<p><strong>注意：</strong>在默认情况下，配置不会启用插件中的任何规则，而且应该作为一个独立的配置来处理。和意味着，你必须在 <code class="language-plaintext highlighter-rouge">plugins</code> 数组中指定插件名和任何你想使用的插件中的规则。任何插件中的规则必须带有插件名或其简写前缀。更多详细信息，请查看 <a href="../user-guide/configuring">Configuring Plugins</a>。</p>

<h3 id="peer-dependency">Peer Dependency</h3>

<p>To make clear that the plugin requires ESLint to work correctly you have to declare ESLint as a <code class="language-plaintext highlighter-rouge">peerDependency</code> in your <code class="language-plaintext highlighter-rouge">package.json</code>.
The plugin support was introduced in ESLint version <code class="language-plaintext highlighter-rouge">0.8.0</code>. Ensure the <code class="language-plaintext highlighter-rouge">peerDependency</code> points to ESLint <code class="language-plaintext highlighter-rouge">0.8.0</code> or later.</p>

<p>为了明确插件需要 ESLint 才能正常运行，你必须在你的 <code class="language-plaintext highlighter-rouge">package.json</code> 中声明将 ESLint 作为一个 <code class="language-plaintext highlighter-rouge">peerDependency</code>。对插件的支持在 ESLint <code class="language-plaintext highlighter-rouge">0.8.0</code> 版本中被引入。要确保 <code class="language-plaintext highlighter-rouge">peerDependency</code> 指向 ESLint <code class="language-plaintext highlighter-rouge">0.8.0</code> 或之后的版本。</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"peerDependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"eslint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&gt;=0.8.0"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="testing">Testing</h3>

<p>ESLint provides the <a href="/docs/developer-guide/nodejs-api#ruletester"><code class="language-plaintext highlighter-rouge">RuleTester</code></a> utility to make it easy to test the rules of your plugin.</p>

<p>ESLint 提供了 <a href="/docs/developer-guide/nodejs-api#ruletester"><code class="language-plaintext highlighter-rouge">RuleTester</code></a> 实用工具可以轻松地测试你插件中的规则。</p>

<h2 id="share-plugins">Share Plugins</h2>

<p>In order to make your plugin available to the community you have to publish it on npm.</p>

<p>为了让你的插件在社区中可用，你需要将它发布到 npm。</p>

<p>Recommended keywords:</p>

<p>推荐的关键字：</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">eslint</code></li>
  <li><code class="language-plaintext highlighter-rouge">eslint</code></li>
  <li><code class="language-plaintext highlighter-rouge">eslintplugin</code></li>
  <li><code class="language-plaintext highlighter-rouge">eslintplugin</code></li>
</ul>

<p>Add these keywords into your <code class="language-plaintext highlighter-rouge">package.json</code> file to make it easy for others to find.</p>

<p>将这些关键字添加到你的 <code class="language-plaintext highlighter-rouge">package.json</code> 中，会让其他人更容易找到它。</p>

<h2 id="further-reading">Further Reading</h2>

<ul>
  <li><a href="https://docs.npmjs.com/misc/developers">npm Developer Guide</a></li>
</ul>

  </article>
</main>

    <hr>

    <div class="container">

      <footer>
        <ul class="list-inline">
          
            <li><a href="https://github.com/eslint/eslint/edit/master/docs/developer-guide/working-with-plugins.md">Edit this page</a></li>
          
          <li><a href="https://groups.google.com/group/eslint">Mailing List</a></li>
          <li><a href="https://github.com/eslint/eslint">GitHub</a></li>
          <li><a href="https://twitter.com/geteslint">Twitter</a></li>
          <li><a href="https://gitter.im/eslint/eslint">Chat Room</a></li>
          <li>Copyright JS Foundation and other contributors, <a href="https://js.foundation">https://js.foundation/</a></li>
        </ul>
      </footer>
    </div><!-- /.container -->

  <link href="/styles/vendor/font.css" rel="stylesheet">
  <script src="/js/vendor/jquery-1.10.2.min.js" defer></script>
  <script src="/js/vendor/bootstrap-native.min.js" defer></script>
  <script src="/js/vendor/anchor.min.js"></script>
      <!-- at the end of the BODY -->
  <script type="text/javascript" src="/js/vendor/docsearch.min.js"></script>
  <script type="text/javascript"> docsearch({
    apiKey: '891b0e977d96c762a3821e0c00172ac9',
    indexName: 'eslint',
    inputSelector: '#eslint-search-input',
    algoliaOptions: { 'facetFilters': [["tags:docs", "tags:blog"]] },
    debug: false // Set debug to true if you want to inspect the dropdown
  });
  var htmlClassList = document.documentElement.classList;
  htmlClassList.remove("no-js");
  htmlClassList.add("js");
  </script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      anchors.add('.doc h2, .doc h3, .doc h4, .blog h2, .blog h3, .blog h4');
      
	
	    var langs = {mixed: '中英文',zh: '中文',en: '英文'};
	    var last = localStorage.getItem('lang') || 'zh';

	    if (last in langs) {
	      $('.lang-chooser').html(langs[last]); 
	      $('.doc').removeClass(function(index,clz){
	          return clz.slice(3);
	      }).addClass('lang-' + last);
	    }

	    $('.navbar-left').show();

	    $('.lang-type').on('click', function() {
	        var $this = $(this),
	            type = $this.data('lang'),
	            lang = $this.html();

	        localStorage.setItem('lang', type);

	        $('.lang-chooser').html(lang); 
	        $('.doc').removeClass(function(index,clz){
	            return clz.slice(3);
	        }).addClass('lang-' + type);
	    });
	
  });
	
  </script>
  <style type="text/css">#cnzz_stat_icon_1278836435 {display: none;}</style>
  <script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1278836435'%3E%3C/span%3E%3Cscript src='https://s4.cnzz.com/z_stat.php%3Fid%3D1278836435%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
  
</body>
</html>

