<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="keywords" content="ESLint中文, ESLint中文网, ESLint规则, ESLint配置, 代码检测, 代码质量, JavaScript, Linter, Linting, Pluggable, Configurable, Code Quality">
  <meta name="description" content="ESLint中文官网, ESLint中英文对照, JavaScript代码检测, JavaScript代码风格检测, JavaScript代码自动格式化,A pluggable and configurable linter tool for identifying and reporting on patterns in JavaScript. Maintain your code quality with ease.">
  <meta name="theme-color" content="#463fd4"/>
  <meta property="og:locale" content="zh_CN">
  <meta property="og:site_name" content="ESLint中文">
  <meta property="og:title" content="Node.js API">
  <meta property="og:url" content="http://localhost:4000/docs/6.0.0/developer-guide/nodejs-api">
  <meta property="og:image" content="http://localhost:4000/img/favicon.512x512.png">

  <meta name="twitter:site" content="@geteslint">
  <meta name="twitter:title" content="Node.js API">
  <meta name="twitter:description" content="ESLint中文官网, ESLint中英文对照, JavaScript代码检测, JavaScript代码风格检测, JavaScript代码自动格式化,A pluggable and configurable linter tool for identifying and reporting on patterns in JavaScript. Maintain your code quality with ease.">
  <meta name="twitter:url" content="http://localhost:4000/docs/6.0.0/developer-guide/nodejs-api">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:image" content="http://localhost:4000/img/favicon.512x512.png">

    
        <title>Node.js API - ESLint中文</title>
    


  <link href="http://localhost:4000/docs/6.0.0/developer-guide/nodejs-api" rel="canonical" />
  <link rel="stylesheet" href="/styles/main.css"/>
  
  <link rel="stylesheet" href="/styles/mixed.css"/>
  
  <link rel='manifest' href='http://localhost:4000/manifest.json'>
  <link rel="icon" href="http://localhost:4000/img/favicon.512x512.png">
  <link rel="alternate" type="application/rss+xml" title="ESLint中文" href="http://localhost:4000/feed.xml">
  <!-- at the end of the HEAD -->
  <link rel="stylesheet" href="/styles/vendor/docsearch.min.css" />
</head>
<body>

<input type="checkbox" id="eslint-toggle-search" class="eslint-toggle-search-checkbox" />
<header class="navbar navbar-default navbar-demo navbar-fixed-top eslint-nav" id="top" role="banner">
  <div class="container">

    <a href="http://localhost:4000/" class="navbar-brand"><img alt="ESLint" src="http://localhost:4000/img/logo.svg" itemprop="image">ESLint</a>

    <div class="eslint-navbar-toggles">
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#eslint-navbar" aria-controls="eslint-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <label for="eslint-toggle-search" class="navbar-toggle eslint-toggle-search-open">
        <span class="sr-only">Open search</span>
        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
      </label>
    </div>

    <nav id="eslint-navbar" class="collapse navbar-collapse eslint-navbar">
      
      <ul class="nav navbar-nav navbar-left">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><span class="lang-chooser">中文</span><span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a class="lang-type" data-lang="zh" href="javascript:;">中文</a></li>
            <li><a class="lang-type" data-lang="mixed" href="javascript:;">中英文</a></li>
            <li><a class="lang-type" data-lang="en" href="javascript:;">英文</a></li>
          </ul>
        </li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="http://localhost:4000/docs/user-guide" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">用户指南<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="http://localhost:4000/docs/user-guide/getting-started">开始</a></li>
            <li><a href="http://localhost:4000/docs/user-guide/configuring">配置</a></li>
            <li><a href="http://localhost:4000/docs/user-guide/command-line-interface">命令行</a></li>
            <li><a href="http://localhost:4000/docs/rules/">规则</a></li>
            <li><a href="http://localhost:4000/docs/user-guide/formatters">Formatters</a></li>
            <li><a href="http://localhost:4000/docs/user-guide/integrations">集成</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="http://localhost:4000/docs/developer-guide" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">开发指南<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="http://localhost:4000/docs/developer-guide/architecture">架构</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/source-code">源码</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/development-environment">开发环境</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/contributing">参与</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/unit-tests">单元测试</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/working-with-rules">创建规则</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/working-with-custom-formatters">自定义格式化器</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/working-with-custom-parsers">自定义解析器</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/working-with-plugins">开发插件</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/shareable-configs">可共享的配置</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/nodejs-api">Node.js API</a></li>
            <li><a href="http://localhost:4000/docs/maintainer-guide">维护者指南</a></li>
          </ul>
        </li>
        <li><a href="http://localhost:4000/blog/">博客</a></li>
        <li class="dropdown">
          <a href="http://localhost:4000/demo" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">演示<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="http://localhost:4000/demo/">ESLint Demo</a></li>
            <li><a href="http://localhost:4000/parser/">Espree Demo</a></li>
          </ul>
        </li>
        <!-- <li><a href="http://localhost:4000/docs/about/">About</a></li> -->
        <li class="dropdown">
          <a href="http://localhost:4000/docs/about/" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">关于<span
              class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="http://localhost:4000/users/">谁在使用 ESLint?</a></li>
            <li><a href="http://localhost:4000/team/">关于 Team</a></li>
            <li><a href="http://localhost:4000/docs/about/">关于 ESLint</a></li>
          </ul>
        </li>
      </ul>

      <label for="eslint-toggle-search" class="navbar-toggle eslint-toggle-search-open">
        <span class="sr-only">Open search</span>
        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
      </label>

      <div class="navbar-form navbar-right eslint-search" role="search">
        <div class="input-group">
          <label class="sr-only" aria-label="Search" for="eslint-search-input">Search</label>
          <div class="eslint-search-input-wrapper">
            <input type="text" class="form-control" id="eslint-search-input" accesskey="s" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search the docs...">
            <label for="eslint-toggle-search" class="eslint-toggle-search-close">
              <span class="sr-only">Close search</span>
              <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
            </label>
          </div>
        </div>
      </div>
    </nav>

  </div><!-- /.container -->
</header><!-- /.navbar -->

<main class="doc lang-zh">
  <article class="container">
    <!-- Note: No pull requests accepted for this file. See README.md in the root directory for details. -->

<h1 id="nodejs-api">Node.js API</h1>

<p>While ESLint is designed to be run on the command line, it’s possible to use ESLint programmatically through the Node.js API. The purpose of the Node.js API is to allow plugin and tool authors to use the ESLint functionality directly, without going through the command line interface.</p>

<p><strong>Note:</strong> Use undocumented parts of the API at your own risk. Only those parts that are specifically mentioned in this document are approved for use and will remain stable and reliable. Anything left undocumented is unstable and may change or be removed at any point.</p>

<h2 id="table-of-contents">Table of Contents</h2>

<ul>
  <li><a href="#sourcecode">SourceCode</a>
    <ul>
      <li><a href="#sourcecodesplitlines">splitLines()</a></li>
    </ul>
  </li>
  <li><a href="#linter">Linter</a>
    <ul>
      <li><a href="#linterverify">verify()</a></li>
      <li><a href="#linterverifyandfix">verifyAndFix()</a></li>
      <li><a href="#linterdefinerule">defineRule()</a></li>
      <li><a href="#linterdefinerules">defineRules()</a></li>
      <li><a href="#lintergetrules">getRules()</a></li>
      <li><a href="#linterdefineparser">defineParser()</a></li>
      <li><a href="#linterversion">version</a></li>
    </ul>
  </li>
  <li><a href="#linter-1">linter (deprecated)</a></li>
  <li><a href="#cliengine">CLIEngine</a>
    <ul>
      <li><a href="#cliengineexecuteonfiles">executeOnFiles()</a></li>
      <li><a href="#cliengineresolvefileglobpatterns">resolveFileGlobPatterns()</a></li>
      <li><a href="#clienginegetconfigforfile">getConfigForFile()</a></li>
      <li><a href="#cliengineexecuteontext">executeOnText()</a></li>
      <li><a href="#cliengineaddplugin">addPlugin()</a></li>
      <li><a href="#cliengineispathignored">isPathIgnored()</a></li>
      <li><a href="#clienginegetformatter">getFormatter()</a></li>
      <li><a href="#clienginegeterrorresults">getErrorResults()</a></li>
      <li><a href="#cliengineoutputfixes">outputFixes()</a></li>
      <li><a href="#clienginegetrules">getRules()</a></li>
      <li><a href="#cliengineversion">version</a></li>
    </ul>
  </li>
  <li><a href="#ruletester">RuleTester</a>
    <ul>
      <li><a href="#customizing-ruletester">Customizing RuleTester</a></li>
    </ul>
  </li>
  <li><a href="#deprecated-apis">Deprecated APIs</a></li>
</ul>

<h2 id="sourcecode">SourceCode</h2>

<p>The <code class="language-plaintext highlighter-rouge">SourceCode</code> type represents the parsed source code that ESLint executes on. It’s used internally in ESLint and is also available so that already-parsed code can be used. You can create a new instance of <code class="language-plaintext highlighter-rouge">SourceCode</code> by passing in the text string representing the code and an abstract syntax tree (AST) in <a href="https://github.com/estree/estree">ESTree</a> format (including location information, range information, comments, and tokens):</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">SourceCode</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">SourceCode</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">code</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SourceCode</span><span class="p">(</span><span class="dl">"</span><span class="s2">var foo = bar;</span><span class="dl">"</span><span class="p">,</span> <span class="nx">ast</span><span class="p">);</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">SourceCode</code> constructor throws an error if the AST is missing any of the required information.</p>

<p>The <code class="language-plaintext highlighter-rouge">SourceCode</code> constructor strips Unicode BOM.
Please note the AST also should be parsed from stripped text.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">SourceCode</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">SourceCode</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">code</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SourceCode</span><span class="p">(</span><span class="dl">"</span><span class="se">\</span><span class="s2">uFEFFvar foo = bar;</span><span class="dl">"</span><span class="p">,</span> <span class="nx">ast</span><span class="p">);</span>

<span class="nx">assert</span><span class="p">(</span><span class="nx">code</span><span class="p">.</span><span class="nx">hasBOM</span> <span class="o">===</span> <span class="kc">true</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">(</span><span class="nx">code</span><span class="p">.</span><span class="nx">text</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">var foo = bar;</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="sourcecodesplitlines">SourceCode#splitLines()</h3>

<p>This is a static function on <code class="language-plaintext highlighter-rouge">SourceCode</code> that is used to split the source code text into an array of lines.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">SourceCode</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">SourceCode</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">code</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">var a = 1;</span><span class="se">\n</span><span class="s2">var b = 2;</span><span class="dl">"</span>

<span class="c1">// split code into an array</span>
<span class="kd">var</span> <span class="nx">codeLines</span> <span class="o">=</span> <span class="nx">SourceCode</span><span class="p">.</span><span class="nx">splitLines</span><span class="p">(</span><span class="nx">code</span><span class="p">);</span>

<span class="cm">/*
    Value of codeLines will be
    [
        "var a = 1;",
        "var b = 2;"
    ]
 */</span>
</code></pre></div></div>

<h2 id="linter">Linter</h2>

<p>The <code class="language-plaintext highlighter-rouge">Linter</code> object does the actual evaluation of the JavaScript code. It doesn’t do any filesystem operations, it simply parses and reports on the code. In particular, the <code class="language-plaintext highlighter-rouge">Linter</code> object does not process configuration objects or files. You can retrieve instances of <code class="language-plaintext highlighter-rouge">Linter</code> like this:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">Linter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">Linter</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">linter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Linter</span><span class="p">();</span>
</code></pre></div></div>

<h3 id="linterverify">Linter#verify</h3>

<p>The most important method on <code class="language-plaintext highlighter-rouge">Linter</code> is <code class="language-plaintext highlighter-rouge">verify()</code>, which initiates linting of the given text. This method accepts three arguments:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">code</code> - the source code to lint (a string or instance of <code class="language-plaintext highlighter-rouge">SourceCode</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">config</code> - a configuration object that has been processed and normalized by CLIEngine using eslintrc files and/or other configuration arguments.
    <ul>
      <li><strong>Note</strong>: If you want to lint text and have your configuration be read and processed, use CLIEngine’s <a href="#cliengineexecuteonfiles"><code class="language-plaintext highlighter-rouge">executeOnFiles</code></a> or <a href="#cliengineexecuteontext"><code class="language-plaintext highlighter-rouge">executeOnText</code></a> instead.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">options</code> - (optional) Additional options for this run.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">filename</code> - (optional) the filename to associate with the source code.</li>
      <li><code class="language-plaintext highlighter-rouge">preprocess</code> - (optional) A function that accepts a string containing source text, and returns an array of strings containing blocks of code to lint. Also see: <a href="/docs/developer-guide/working-with-plugins#processors-in-plugins">Processors in Plugins</a></li>
      <li><code class="language-plaintext highlighter-rouge">postprocess</code> - (optional) A function that accepts an array of problem lists (one list of problems for each block of code from <code class="language-plaintext highlighter-rouge">preprocess</code>), and returns a one-dimensional array of problems containing problems for the original, unprocessed text. Also see: <a href="/docs/developer-guide/working-with-plugins#processors-in-plugins">Processors in Plugins</a></li>
      <li><code class="language-plaintext highlighter-rouge">allowInlineConfig</code> - (optional) set to <code class="language-plaintext highlighter-rouge">false</code> to disable inline comments from changing ESLint rules.</li>
      <li><code class="language-plaintext highlighter-rouge">reportUnusedDisableDirectives</code> - (optional) when set to <code class="language-plaintext highlighter-rouge">true</code>, adds reported errors for unused <code class="language-plaintext highlighter-rouge">eslint-disable</code> directives when no problems would be reported in the disabled area anyway.</li>
    </ul>
  </li>
</ul>

<p>If the third argument is a string, it is interpreted as the <code class="language-plaintext highlighter-rouge">filename</code>.</p>

<p>You can call <code class="language-plaintext highlighter-rouge">verify()</code> like this:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">Linter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">Linter</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">linter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Linter</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">messages</span> <span class="o">=</span> <span class="nx">linter</span><span class="p">.</span><span class="nx">verify</span><span class="p">(</span><span class="dl">"</span><span class="s2">var foo;</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">semi</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">},</span> <span class="p">{</span> <span class="na">filename</span><span class="p">:</span> <span class="dl">"</span><span class="s2">foo.js</span><span class="dl">"</span> <span class="p">});</span>

<span class="c1">// or using SourceCode</span>

<span class="kd">var</span> <span class="nx">Linter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">Linter</span><span class="p">,</span>
    <span class="nx">linter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Linter</span><span class="p">(),</span>
    <span class="nx">SourceCode</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">SourceCode</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">code</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SourceCode</span><span class="p">(</span><span class="dl">"</span><span class="s2">var foo = bar;</span><span class="dl">"</span><span class="p">,</span> <span class="nx">ast</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">messages</span> <span class="o">=</span> <span class="nx">linter</span><span class="p">.</span><span class="nx">verify</span><span class="p">(</span><span class="nx">code</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">semi</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">},</span> <span class="p">{</span> <span class="na">filename</span><span class="p">:</span> <span class="dl">"</span><span class="s2">foo.js</span><span class="dl">"</span> <span class="p">});</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">verify()</code> method returns an array of objects containing information about the linting warnings and errors. Here’s an example:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">fatal</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">ruleId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">semi</span><span class="dl">"</span><span class="p">,</span>
    <span class="nx">severity</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="nx">line</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">column</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Expected a semicolon.</span><span class="dl">"</span><span class="p">,</span>
    <span class="nx">fix</span><span class="p">:</span> <span class="p">{</span>
        <span class="nl">range</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span>
        <span class="nx">text</span><span class="p">:</span> <span class="dl">"</span><span class="s2">;</span><span class="dl">"</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The information available for each linting message is:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">column</code> - the column on which the error occurred.</li>
  <li><code class="language-plaintext highlighter-rouge">fatal</code> - usually omitted, but will be set to true if there’s a parsing error (not related to a rule).</li>
  <li><code class="language-plaintext highlighter-rouge">line</code> - the line on which the error occurred.</li>
  <li><code class="language-plaintext highlighter-rouge">message</code> - the message that should be output.</li>
  <li><code class="language-plaintext highlighter-rouge">nodeType</code> - the node or token type that was reported with the problem.</li>
  <li><code class="language-plaintext highlighter-rouge">ruleId</code> - the ID of the rule that triggered the messages (or null if <code class="language-plaintext highlighter-rouge">fatal</code> is true).</li>
  <li><code class="language-plaintext highlighter-rouge">severity</code> - either 1 or 2, depending on your configuration.</li>
  <li><code class="language-plaintext highlighter-rouge">endColumn</code> - the end column of the range on which the error occurred (this property is omitted if it’s not range).</li>
  <li><code class="language-plaintext highlighter-rouge">endLine</code> - the end line of the range on which the error occurred (this property is omitted if it’s not range).</li>
  <li><code class="language-plaintext highlighter-rouge">fix</code> - an object describing the fix for the problem (this property is omitted if no fix is available).</li>
</ul>

<p>Linting message objects have a deprecated <code class="language-plaintext highlighter-rouge">source</code> property. This property <strong>will be removed</strong> from linting messages in an upcoming breaking release. If you depend on this property, you should now use the <code class="language-plaintext highlighter-rouge">SourceCode</code> instance provided by the linter.</p>

<p>You can also get an instance of the <code class="language-plaintext highlighter-rouge">SourceCode</code> object used inside of <code class="language-plaintext highlighter-rouge">linter</code> by using the <code class="language-plaintext highlighter-rouge">getSourceCode()</code> method:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">Linter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">Linter</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">linter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Linter</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">messages</span> <span class="o">=</span> <span class="nx">linter</span><span class="p">.</span><span class="nx">verify</span><span class="p">(</span><span class="dl">"</span><span class="s2">var foo = bar;</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">semi</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">},</span> <span class="p">{</span> <span class="na">filename</span><span class="p">:</span> <span class="dl">"</span><span class="s2">foo.js</span><span class="dl">"</span> <span class="p">});</span>

<span class="kd">var</span> <span class="nx">code</span> <span class="o">=</span> <span class="nx">linter</span><span class="p">.</span><span class="nx">getSourceCode</span><span class="p">();</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">code</span><span class="p">.</span><span class="nx">text</span><span class="p">);</span>     <span class="c1">// "var foo = bar;"</span>
</code></pre></div></div>

<p>In this way, you can retrieve the text and AST used for the last run of <code class="language-plaintext highlighter-rouge">linter.verify()</code>.</p>

<h3 id="linterverifyandfix">Linter#verifyAndFix()</h3>

<p>This method is similar to verify except that it also runs autofixing logic, similar to the <code class="language-plaintext highlighter-rouge">--fix</code> flag on the command line. The result object will contain the autofixed code, along with any remaining linting messages for the code that were not autofixed.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">Linter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">Linter</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">linter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Linter</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">messages</span> <span class="o">=</span> <span class="nx">linter</span><span class="p">.</span><span class="nx">verifyAndFix</span><span class="p">(</span><span class="dl">"</span><span class="s2">var foo</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">semi</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Output object from this method:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">fixed</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">output</span><span class="p">:</span> <span class="dl">"</span><span class="s2">var foo;</span><span class="dl">"</span><span class="p">,</span>
    <span class="nx">messages</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The information available is:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">fixed</code> - True, if the code was fixed.</li>
  <li><code class="language-plaintext highlighter-rouge">output</code> - Fixed code text (might be the same as input if no fixes were applied).</li>
  <li><code class="language-plaintext highlighter-rouge">messages</code> - Collection of all messages for the given code (It has the same information as explained above under <code class="language-plaintext highlighter-rouge">verify</code> block).</li>
</ul>

<h3 id="linterdefinerule">Linter#defineRule</h3>

<p>Each <code class="language-plaintext highlighter-rouge">Linter</code> instance holds a map of rule names to loaded rule objects. By default, all ESLint core rules are loaded. If you want to use <code class="language-plaintext highlighter-rouge">Linter</code> with custom rules, you should use the <code class="language-plaintext highlighter-rouge">defineRule</code> method to register your rules by ID.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Linter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">Linter</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">linter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Linter</span><span class="p">();</span>

<span class="nx">linter</span><span class="p">.</span><span class="nx">defineRule</span><span class="p">(</span><span class="dl">"</span><span class="s2">my-custom-rule</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
    <span class="c1">// (an ESLint rule)</span>

    <span class="nx">create</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="nx">linter</span><span class="p">.</span><span class="nx">verify</span><span class="p">(</span><span class="dl">"</span><span class="s2">// some source text</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">rules</span><span class="p">:</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">my-custom-rule</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">error</span><span class="dl">"</span> <span class="p">}</span> <span class="p">});</span>
</code></pre></div></div>

<h3 id="linterdefinerules">Linter#defineRules</h3>

<p>This is a convenience method similar to <code class="language-plaintext highlighter-rouge">Linter#defineRule</code>, except that it allows you to define many rules at once using an object.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Linter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">Linter</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">linter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Linter</span><span class="p">();</span>

<span class="nx">linter</span><span class="p">.</span><span class="nx">defineRules</span><span class="p">({</span>
    <span class="dl">"</span><span class="s2">my-custom-rule</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span> <span class="cm">/* an ESLint rule */</span> <span class="nx">create</span><span class="p">()</span> <span class="p">{}</span> <span class="p">},</span>
    <span class="dl">"</span><span class="s2">another-custom-rule</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span> <span class="cm">/* an ESLint rule */</span> <span class="nx">create</span><span class="p">()</span> <span class="p">{}</span> <span class="p">}</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="nx">linter</span><span class="p">.</span><span class="nx">verify</span><span class="p">(</span><span class="dl">"</span><span class="s2">// some source text</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">my-custom-rule</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">error</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">another-custom-rule</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">warn</span><span class="dl">"</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="lintergetrules">Linter#getRules</h3>

<p>This method returns a map of all loaded rules.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Linter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">Linter</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">linter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Linter</span><span class="p">();</span>

<span class="nx">linter</span><span class="p">.</span><span class="nx">getRules</span><span class="p">();</span>

<span class="cm">/*
Map {
  'accessor-pairs' =&gt; { meta: { docs: [Object], schema: [Array] }, create: [Function: create] },
  'array-bracket-newline' =&gt; { meta: { docs: [Object], schema: [Array] }, create: [Function: create] },
  ...
}
*/</span>
</code></pre></div></div>

<h3 id="linterdefineparser">Linter#defineParser</h3>

<p>Each instance of <code class="language-plaintext highlighter-rouge">Linter</code> holds a map of custom parsers. If you want to define a parser programmatically, you can add this function
with the name of the parser as first argument and the <a href="/docs/developer-guide/working-with-plugins#working-with-custom-parsers">parser object</a> as second argument. The default <code class="language-plaintext highlighter-rouge">"espree"</code> parser will already be loaded for every <code class="language-plaintext highlighter-rouge">Linter</code> instance.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Linter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">Linter</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">linter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Linter</span><span class="p">();</span>

<span class="nx">linter</span><span class="p">.</span><span class="nx">defineParser</span><span class="p">(</span><span class="dl">"</span><span class="s2">my-custom-parser</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">parse</span><span class="p">(</span><span class="nx">code</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="nx">linter</span><span class="p">.</span><span class="nx">verify</span><span class="p">(</span><span class="dl">"</span><span class="s2">// some source text</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">parser</span><span class="p">:</span> <span class="dl">"</span><span class="s2">my-custom-parser</span><span class="dl">"</span> <span class="p">});</span>
</code></pre></div></div>

<h3 id="linterversionlinterversion">Linter#version/Linter.version</h3>

<p>Each instance of <code class="language-plaintext highlighter-rouge">Linter</code> has a <code class="language-plaintext highlighter-rouge">version</code> property containing the semantic version number of ESLint that the <code class="language-plaintext highlighter-rouge">Linter</code> instance is from.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Linter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">Linter</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">linter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Linter</span><span class="p">();</span>

<span class="nx">linter</span><span class="p">.</span><span class="nx">version</span><span class="p">;</span> <span class="c1">// =&gt; '4.5.0'</span>
</code></pre></div></div>

<p>There is also a <code class="language-plaintext highlighter-rouge">Linter.version</code> property that you can read without instantiating <code class="language-plaintext highlighter-rouge">Linter</code>:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Linter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">Linter</span><span class="p">;</span>

<span class="nx">Linter</span><span class="p">.</span><span class="nx">version</span><span class="p">;</span> <span class="c1">// =&gt; '4.5.0'</span>
</code></pre></div></div>

<h2 id="linter-1">linter</h2>

<p>The <code class="language-plaintext highlighter-rouge">eslint.linter</code> object (deprecated) is an instance of the <code class="language-plaintext highlighter-rouge">Linter</code> class as defined <a href="#linter">above</a>. <code class="language-plaintext highlighter-rouge">eslint.linter</code> exists for backwards compatibility, but we do not recommend using it because any mutations to it are shared among every module that uses <code class="language-plaintext highlighter-rouge">eslint</code>. Instead, please create your own instance of <code class="language-plaintext highlighter-rouge">eslint.Linter</code>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">linter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">linter</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">messages</span> <span class="o">=</span> <span class="nx">linter</span><span class="p">.</span><span class="nx">verify</span><span class="p">(</span><span class="dl">"</span><span class="s2">var foo;</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">semi</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">},</span> <span class="p">{</span> <span class="na">filename</span><span class="p">:</span> <span class="dl">"</span><span class="s2">foo.js</span><span class="dl">"</span> <span class="p">});</span>
</code></pre></div></div>

<p>Note: This API is deprecated as of 4.0.0.</p>

<h2 id="cliengine">CLIEngine</h2>

<p>The primary Node.js API is <code class="language-plaintext highlighter-rouge">CLIEngine</code>, which is the underlying utility that runs the ESLint command line interface. This object will read the filesystem for configuration and file information but will not output any results. Instead, it allows you direct access to the important information so you can deal with the output yourself.</p>

<p>You can get a reference to the <code class="language-plaintext highlighter-rouge">CLIEngine</code> by doing the following:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">CLIEngine</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">CLIEngine</span><span class="p">;</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">CLIEngine</code> is a constructor, and you can create a new instance by passing in the options you want to use. The available options are:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">allowInlineConfig</code> - Set to <code class="language-plaintext highlighter-rouge">false</code> to disable the use of configuration comments (such as <code class="language-plaintext highlighter-rouge">/*eslint-disable*/</code>). Corresponds to <code class="language-plaintext highlighter-rouge">--no-inline-config</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">baseConfig</code> - Can optionally be set to a config object that has the same schema as <code class="language-plaintext highlighter-rouge">.eslintrc.*</code>. This will used as a default config, and will be merged with any configuration defined in <code class="language-plaintext highlighter-rouge">.eslintrc.*</code> files, with the <code class="language-plaintext highlighter-rouge">.eslintrc.*</code> files having precedence.</li>
  <li><code class="language-plaintext highlighter-rouge">cache</code> - Operate only on changed files (default: <code class="language-plaintext highlighter-rouge">false</code>). Corresponds to <code class="language-plaintext highlighter-rouge">--cache</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">cacheFile</code> - Name of the file where the cache will be stored (default: <code class="language-plaintext highlighter-rouge">.eslintcache</code>). Corresponds to <code class="language-plaintext highlighter-rouge">--cache-file</code>. Deprecated: use <code class="language-plaintext highlighter-rouge">cacheLocation</code> instead.</li>
  <li><code class="language-plaintext highlighter-rouge">cacheLocation</code> - Name of the file or directory where the cache will be stored (default: <code class="language-plaintext highlighter-rouge">.eslintcache</code>). Corresponds to <code class="language-plaintext highlighter-rouge">--cache-location</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">configFile</code> - The configuration file to use (default: null). If <code class="language-plaintext highlighter-rouge">useEslintrc</code> is true or not specified, this configuration will be merged with any configuration defined in <code class="language-plaintext highlighter-rouge">.eslintrc.*</code> files, with options in this configuration having precedence. Corresponds to <code class="language-plaintext highlighter-rouge">-c</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">cwd</code> - Path to a directory that should be considered as the current working directory.</li>
  <li><code class="language-plaintext highlighter-rouge">envs</code> - An array of environments to load (default: empty array). Corresponds to <code class="language-plaintext highlighter-rouge">--env</code>. Note: This differs from <code class="language-plaintext highlighter-rouge">.eslintrc.*</code> / <code class="language-plaintext highlighter-rouge">baseConfig</code>, where instead the option is called <code class="language-plaintext highlighter-rouge">env</code> and is an object.</li>
  <li><code class="language-plaintext highlighter-rouge">extensions</code> - An array of filename extensions that should be checked for code. The default is an array containing just <code class="language-plaintext highlighter-rouge">".js"</code>. Corresponds to <code class="language-plaintext highlighter-rouge">--ext</code>. It is only used in conjunction with directories, not with filenames, glob patterns or when using <code class="language-plaintext highlighter-rouge">executeOnText()</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">fix</code> - A boolean or a function (default: <code class="language-plaintext highlighter-rouge">false</code>). If a function, it will be passed each linting message and should return a boolean indicating whether the fix should be included with the output report (errors and warnings will not be listed if fixed). Files on disk are never changed regardless of the value of <code class="language-plaintext highlighter-rouge">fix</code>. To persist changes to disk, call <a href="#cliengineoutputfixes"><code class="language-plaintext highlighter-rouge">outputFixes()</code></a>.</li>
  <li><code class="language-plaintext highlighter-rouge">fixTypes</code> - An array of rule types for which fixes should be applied (default: <code class="language-plaintext highlighter-rouge">null</code>). This array acts like a filter, only allowing rules of the given types to apply fixes. Possible array values are <code class="language-plaintext highlighter-rouge">"problem"</code>, <code class="language-plaintext highlighter-rouge">"suggestion"</code>, and <code class="language-plaintext highlighter-rouge">"layout"</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">globals</code> - An array of global variables to declare (default: empty array). Corresponds to <code class="language-plaintext highlighter-rouge">--global</code>, and similarly supports passing <code class="language-plaintext highlighter-rouge">'name:true'</code> to denote a writeable global. Note: This differs from <code class="language-plaintext highlighter-rouge">.eslintrc.*</code> / <code class="language-plaintext highlighter-rouge">baseConfig</code>, where <code class="language-plaintext highlighter-rouge">globals</code> is an object.</li>
  <li><code class="language-plaintext highlighter-rouge">ignore</code> - False disables use of <code class="language-plaintext highlighter-rouge">.eslintignore</code>, <code class="language-plaintext highlighter-rouge">ignorePath</code> and <code class="language-plaintext highlighter-rouge">ignorePattern</code> (default: true). Corresponds to <code class="language-plaintext highlighter-rouge">--no-ignore</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">ignorePath</code> - The ignore file to use instead of <code class="language-plaintext highlighter-rouge">.eslintignore</code> (default: null). Corresponds to <code class="language-plaintext highlighter-rouge">--ignore-path</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">ignorePattern</code> - Glob patterns for paths to ignore. String or array of strings.</li>
  <li><code class="language-plaintext highlighter-rouge">parser</code> - Specify the parser to be used (default: <code class="language-plaintext highlighter-rouge">espree</code>). Corresponds to <code class="language-plaintext highlighter-rouge">--parser</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">parserOptions</code> - An object containing parser options (default: empty object). Corresponds to <code class="language-plaintext highlighter-rouge">--parser-options</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">plugins</code> - An array of plugins to load (default: empty array). Corresponds to <code class="language-plaintext highlighter-rouge">--plugin</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">reportUnusedDisableDirectives</code> - When set to <code class="language-plaintext highlighter-rouge">true</code>, adds reported errors for unused <code class="language-plaintext highlighter-rouge">eslint-disable</code> directives when no problems would be reported in the disabled area anyway (default: false). Corresponds to <code class="language-plaintext highlighter-rouge">--report-unused-disable-directives</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">rulePaths</code> - An array of directories to load custom rules from (default: empty array). Corresponds to <code class="language-plaintext highlighter-rouge">--rulesdir</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">rules</code> - An object of rules to use (default: null). Corresponds to <code class="language-plaintext highlighter-rouge">--rule</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">useEslintrc</code> - Set to false to disable use of <code class="language-plaintext highlighter-rouge">.eslintrc</code> files (default: true). Corresponds to <code class="language-plaintext highlighter-rouge">--no-eslintrc</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">globInputPaths</code> - Set to false to skip glob resolution of input file paths to lint (default: true). If false, each input file paths is assumed to be a non-glob path to an existing file.</li>
</ul>

<p>To programmatically set <code class="language-plaintext highlighter-rouge">.eslintrc.*</code> options not supported above (such as <code class="language-plaintext highlighter-rouge">extends</code>,
<code class="language-plaintext highlighter-rouge">overrides</code> and <code class="language-plaintext highlighter-rouge">settings</code>), define them in a config object passed to <code class="language-plaintext highlighter-rouge">baseConfig</code> instead.</p>

<p>For example:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">CLIEngine</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">CLIEngine</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">cli</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CLIEngine</span><span class="p">({</span>
    <span class="na">baseConfig</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">extends</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">eslint-config-shared</span><span class="dl">"</span><span class="p">],</span>
        <span class="na">settings</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">sharedData</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Hello</span><span class="dl">"</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="na">envs</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">browser</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">mocha</span><span class="dl">"</span><span class="p">],</span>
    <span class="na">useEslintrc</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">semi</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p>In this example, a new <code class="language-plaintext highlighter-rouge">CLIEngine</code> instance is created that extends a configuration called
<code class="language-plaintext highlighter-rouge">"eslint-config-shared"</code>, a setting named <code class="language-plaintext highlighter-rouge">"sharedData"</code> and two environments (<code class="language-plaintext highlighter-rouge">"browser"</code>
and <code class="language-plaintext highlighter-rouge">"mocha"</code>) are defined, loading of <code class="language-plaintext highlighter-rouge">.eslintrc</code> and <code class="language-plaintext highlighter-rouge">package.json</code> files are disabled,
and the <code class="language-plaintext highlighter-rouge">semi</code> rule enabled as an error. You can then call methods on <code class="language-plaintext highlighter-rouge">cli</code> and these options
will be used to perform the correct action.</p>

<p>Note: Currently <code class="language-plaintext highlighter-rouge">CLIEngine</code> does not validate options passed to it, but may start doing so in the future.</p>

<h3 id="cliengineexecuteonfiles">CLIEngine#executeOnFiles()</h3>

<p>If you want to lint one or more files, use the <code class="language-plaintext highlighter-rouge">executeOnFiles()</code> method. This method accepts a single argument, which is an array of files and/or directories to traverse for files. You can pass the same values as you would using the ESLint command line interface, such as <code class="language-plaintext highlighter-rouge">"."</code> to search all JavaScript files in the current directory. Here’s an example:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">CLIEngine</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">CLIEngine</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">cli</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CLIEngine</span><span class="p">({</span>
    <span class="na">envs</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">browser</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">mocha</span><span class="dl">"</span><span class="p">],</span>
    <span class="na">useEslintrc</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">semi</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// lint myfile.js and all files in lib/</span>
<span class="kd">var</span> <span class="nx">report</span> <span class="o">=</span> <span class="nx">cli</span><span class="p">.</span><span class="nx">executeOnFiles</span><span class="p">([</span><span class="dl">"</span><span class="s2">myfile.js</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">lib/</span><span class="dl">"</span><span class="p">]);</span>
</code></pre></div></div>

<p>The return value is an object containing the results of the linting operation. Here’s an example of a report object:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">results</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="na">filePath</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/Users/eslint/project/myfile.js</span><span class="dl">"</span><span class="p">,</span>
            <span class="na">messages</span><span class="p">:</span> <span class="p">[{</span>
                <span class="na">ruleId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">semi</span><span class="dl">"</span><span class="p">,</span>
                <span class="na">severity</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                <span class="na">message</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Missing semicolon.</span><span class="dl">"</span><span class="p">,</span>
                <span class="na">line</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="na">column</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span>
                <span class="na">nodeType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ExpressionStatement</span><span class="dl">"</span><span class="p">,</span>
                <span class="na">fix</span><span class="p">:</span> <span class="p">{</span> <span class="na">range</span><span class="p">:</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span> <span class="na">text</span><span class="p">:</span> <span class="dl">"</span><span class="s2">;</span><span class="dl">"</span> <span class="p">}</span>
            <span class="p">}],</span>
            <span class="na">errorCount</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="na">warningCount</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="na">fixableErrorCount</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="na">fixableWarningCount</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="na">source</span><span class="p">:</span> <span class="dl">"</span><span class="se">\"</span><span class="s2">use strict</span><span class="se">\"\n</span><span class="dl">"</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="nx">errorCount</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">warningCount</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">fixableErrorCount</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">fixableWarningCount</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">usedDeprecatedRules</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You can also pass <code class="language-plaintext highlighter-rouge">fix: true</code> when instantiating the <code class="language-plaintext highlighter-rouge">CLIEngine</code> in order to have it figure out what fixes can be applied.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">CLIEngine</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">CLIEngine</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">cli</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CLIEngine</span><span class="p">({</span>
    <span class="na">envs</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">browser</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">mocha</span><span class="dl">"</span><span class="p">],</span>
    <span class="na">fix</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// difference from last example</span>
    <span class="na">useEslintrc</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">semi</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="na">quotes</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="dl">"</span><span class="s2">double</span><span class="dl">"</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// lint myfile.js and all files in lib/</span>
<span class="kd">var</span> <span class="nx">report</span> <span class="o">=</span> <span class="nx">cli</span><span class="p">.</span><span class="nx">executeOnFiles</span><span class="p">([</span><span class="dl">"</span><span class="s2">myfile.js</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">lib/</span><span class="dl">"</span><span class="p">]);</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">results</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="na">filePath</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/Users/eslint/project/myfile.js</span><span class="dl">"</span><span class="p">,</span>
            <span class="na">messages</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="na">ruleId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">semi</span><span class="dl">"</span><span class="p">,</span>
                    <span class="na">severity</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                    <span class="na">message</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Missing semicolon.</span><span class="dl">"</span><span class="p">,</span>
                    <span class="na">line</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="na">column</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span>
                    <span class="na">nodeType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ExpressionStatement</span><span class="dl">"</span><span class="p">,</span>
                    <span class="na">fix</span><span class="p">:</span> <span class="p">{</span> <span class="na">range</span><span class="p">:</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span> <span class="na">text</span><span class="p">:</span> <span class="dl">"</span><span class="s2">;</span><span class="dl">"</span> <span class="p">}</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="na">ruleId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">func-name-matching</span><span class="dl">"</span><span class="p">,</span>
                    <span class="na">severity</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                    <span class="na">message</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Function name `bar` should match variable name `foo`</span><span class="dl">"</span><span class="p">,</span>
                    <span class="na">line</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                    <span class="na">column</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                    <span class="na">nodeType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">VariableDeclarator</span><span class="dl">"</span>
                <span class="p">}</span>
            <span class="p">],</span>
            <span class="na">errorCount</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="na">warningCount</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="na">fixableErrorCount</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="na">fixableWarningCount</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="na">output</span><span class="p">:</span> <span class="dl">"</span><span class="se">\"</span><span class="s2">use strict</span><span class="se">\"</span><span class="s2">;</span><span class="se">\n</span><span class="s2">var foo = function bar() {};</span><span class="se">\n</span><span class="s2">foo();</span><span class="se">\n</span><span class="dl">"</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="nx">errorCount</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="nx">warningCount</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">fixableErrorCount</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">fixableWarningCount</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">usedDeprecatedRules</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</code></pre></div></div>

<p>If the operation ends with a parsing error, you will get a single message for this file, with <code class="language-plaintext highlighter-rouge">fatal: true</code> added as an extra property.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">results</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="na">filePath</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./myfile.js</span><span class="dl">"</span><span class="p">,</span>
            <span class="na">messages</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="na">ruleId</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
                    <span class="na">fatal</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="na">severity</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                    <span class="na">message</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Parsing error: Unexpected token foo</span><span class="dl">"</span><span class="p">,</span>
                    <span class="na">line</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="na">column</span><span class="p">:</span> <span class="mi">10</span>
                <span class="p">}</span>
            <span class="p">],</span>
            <span class="na">errorCount</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="na">warningCount</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="na">fixableErrorCount</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="na">fixableWarningCount</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="na">source</span><span class="p">:</span> <span class="dl">"</span><span class="s2">function foo() {}</span><span class="dl">"</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="nx">errorCount</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">warningCount</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">fixableErrorCount</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">fixableWarningCount</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">usedDeprecatedRules</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The top-level report object has a <code class="language-plaintext highlighter-rouge">results</code> array containing all linting results for files that had warnings or errors (any files that did not produce a warning or error are omitted). Each file result includes:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">filePath</code> - Path to the given file.</li>
  <li><code class="language-plaintext highlighter-rouge">messages</code> - Array containing the result of calling <code class="language-plaintext highlighter-rouge">linter.verify()</code> on the given file.</li>
  <li><code class="language-plaintext highlighter-rouge">errorCount</code> and <code class="language-plaintext highlighter-rouge">warningCount</code> - The exact number of errors and warnings respectively on the given file.</li>
  <li><code class="language-plaintext highlighter-rouge">source</code> - The source code for the given file. This property is omitted if this file has no errors/warnings or if the <code class="language-plaintext highlighter-rouge">output</code> property is present.</li>
  <li><code class="language-plaintext highlighter-rouge">output</code> - The source code for the given file with as many fixes applied as possible, so you can use that to rewrite the files if necessary. This property is omitted if no fix is available.</li>
</ul>

<p>The top-level report object also has <code class="language-plaintext highlighter-rouge">errorCount</code> and <code class="language-plaintext highlighter-rouge">warningCount</code> which give the exact number of errors and warnings respectively on all the files. Additionally, <code class="language-plaintext highlighter-rouge">usedDeprecatedRules</code> signals any deprecated rules used and their replacement (if available). Specifically, it is array of objects with properties like so:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ruleId</code> - The name of the rule (e.g. <code class="language-plaintext highlighter-rouge">indent-legacy</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">replacedBy</code> - An array of rules that replace the deprecated rule (e.g. <code class="language-plaintext highlighter-rouge">["indent"]</code>).</li>
</ul>

<p>Once you get a report object, it’s up to you to determine how to output the results. Fixes will not be automatically applied to the files, even if you set <code class="language-plaintext highlighter-rouge">fix: true</code> when constructing the <code class="language-plaintext highlighter-rouge">CLIEngine</code> instance. To apply fixes to the files, call <a href="#cliengineoutputfixes"><code class="language-plaintext highlighter-rouge">outputFixes</code></a>.</p>

<h3 id="cliengineresolvefileglobpatterns">CLIEngine#resolveFileGlobPatterns()</h3>

<p>You can pass filesystem-style or glob patterns to ESLint and have it function properly. In order to achieve this, ESLint must resolve non-glob patterns into glob patterns before determining which files to execute on. The <code class="language-plaintext highlighter-rouge">resolveFileGlobPatterns()</code> methods uses the current settings from <code class="language-plaintext highlighter-rouge">CLIEngine</code> to resolve non-glob patterns into glob patterns. Pass an array of patterns that might be passed to the ESLint CLI and it will return an array of glob patterns that mean the same thing. Here’s an example:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">CLIEngine</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">CLIEngine</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">cli</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CLIEngine</span><span class="p">({</span>
<span class="p">});</span>

<span class="c1">// pass an array of patterns</span>
<span class="kd">var</span> <span class="nx">globPatterns</span> <span class="o">=</span> <span class="nx">cli</span><span class="p">.</span><span class="nx">resolveFileGlobPatterns</span><span class="p">([</span><span class="dl">"</span><span class="s2">.</span><span class="dl">"</span><span class="p">]);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">globPatterns</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>       <span class="c1">// ["**/*.js"]</span>
</code></pre></div></div>

<h3 id="clienginegetconfigforfile">CLIEngine#getConfigForFile()</h3>

<p>If you want to retrieve a configuration object for a given file, use the <code class="language-plaintext highlighter-rouge">getConfigForFile()</code> method. This method accepts one argument, a file path, and returns an object represented the calculated configuration of the file. Here’s an example:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">CLIEngine</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">CLIEngine</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">cli</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CLIEngine</span><span class="p">({</span>
    <span class="na">envs</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">browser</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">mocha</span><span class="dl">"</span><span class="p">],</span>
    <span class="na">useEslintrc</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">semi</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">config</span> <span class="o">=</span> <span class="nx">cli</span><span class="p">.</span><span class="nx">getConfigForFile</span><span class="p">(</span><span class="dl">"</span><span class="s2">myfile.js</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>Once you have the configuration information, you can pass it into the <code class="language-plaintext highlighter-rouge">linter</code> object:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">CLIEngine</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">CLIEngine</span><span class="p">,</span>
    <span class="nx">linter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">linter</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">cli</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CLIEngine</span><span class="p">({</span>
    <span class="na">envs</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">browser</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">mocha</span><span class="dl">"</span><span class="p">],</span>
    <span class="na">useEslintrc</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">semi</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">config</span> <span class="o">=</span> <span class="nx">cli</span><span class="p">.</span><span class="nx">getConfigForFile</span><span class="p">(</span><span class="dl">"</span><span class="s2">myfile.js</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">messages</span> <span class="o">=</span> <span class="nx">linter</span><span class="p">.</span><span class="nx">verify</span><span class="p">(</span><span class="dl">'</span><span class="s1">var foo;</span><span class="dl">'</span><span class="p">,</span> <span class="nx">config</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="cliengineexecuteontext">CLIEngine#executeOnText()</h3>

<p>If you already have some text to lint, then you can use the <code class="language-plaintext highlighter-rouge">executeOnText()</code> method to lint that text. The linter will assume that the text is a file in the current working directory, and so will still obey any <code class="language-plaintext highlighter-rouge">.eslintrc</code> and <code class="language-plaintext highlighter-rouge">.eslintignore</code> files that may be present. Here’s an example:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">CLIEngine</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">CLIEngine</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">cli</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CLIEngine</span><span class="p">({</span>
    <span class="na">envs</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">browser</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">mocha</span><span class="dl">"</span><span class="p">],</span>
    <span class="na">useEslintrc</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">semi</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// lint the supplied text and optionally set</span>
<span class="c1">// a filename that is displayed in the report</span>
<span class="kd">var</span> <span class="nx">report</span> <span class="o">=</span> <span class="nx">cli</span><span class="p">.</span><span class="nx">executeOnText</span><span class="p">(</span><span class="dl">"</span><span class="s2">var foo = 'bar';</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">foo.js</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">report</code> returned from <code class="language-plaintext highlighter-rouge">executeOnText()</code> is in the same format as from <code class="language-plaintext highlighter-rouge">executeOnFiles()</code>, but there is only ever one result in <code class="language-plaintext highlighter-rouge">report.results</code>.</p>

<p>If a filename in the optional second parameter matches a file that is configured to be ignored, then this function returns no errors or warnings. To return a warning instead, call the method with true as the optional third parameter.</p>

<h3 id="cliengineaddplugin">CLIEngine#addPlugin()</h3>

<p>Loads a plugin from configuration object with specified name. Name can include plugin prefix (“eslint-plugin-“)</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">CLIEngine</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">CLIEngine</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">cli</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CLIEngine</span><span class="p">({</span>
    <span class="na">ignore</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">});</span>
<span class="nx">cli</span><span class="p">.</span><span class="nx">addPlugin</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint-plugin-processor</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">processors</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">.txt</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">preprocess</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="p">[</span><span class="nx">text</span><span class="p">];</span>
            <span class="p">},</span>
            <span class="na">postprocess</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">messages</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">messages</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="cliengineispathignored">CLIEngine#isPathIgnored()</h3>

<p>Checks if a given path is ignored by ESLint.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">CLIEngine</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">CLIEngine</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">cli</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CLIEngine</span><span class="p">({</span>
    <span class="na">ignore</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">ignorePath</span><span class="p">:</span> <span class="dl">"</span><span class="s2">.customIgnoreFile</span><span class="dl">"</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">isIgnored</span> <span class="o">=</span> <span class="nx">cli</span><span class="p">.</span><span class="nx">isPathIgnored</span><span class="p">(</span><span class="dl">"</span><span class="s2">foo/bar.js</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="clienginegetformatter">CLIEngine#getFormatter()</h3>

<p>Retrieves a formatter, which you can then use to format a report object. The argument is either the name of a built-in formatter:</p>

<ul>
  <li>“<a href="../user-guide/formatters#checkstyle">checkstyle</a>”</li>
  <li>“<a href="../user-guide/formatters#codeframe">codeframe</a>”</li>
  <li>“<a href="../user-guide/formatters#compact">compact</a>”</li>
  <li>“<a href="../user-guide/formatters#html">html</a>”</li>
  <li>“<a href="../user-guide/formatters#jslint-xml">jslint-xml</a>”</li>
  <li>“<a href="../user-guide/formatters#json">json</a>”</li>
  <li>“<a href="../user-guide/formatters#junit">junit</a>”</li>
  <li>“<a href="../user-guide/formatters#stylish">stylish</a>” (the default)</li>
  <li>“<a href="../user-guide/formatters#table">table</a>”</li>
  <li>“<a href="../user-guide/formatters#tap">tap</a>”</li>
  <li>“<a href="../user-guide/formatters#unix">unix</a>”</li>
  <li>“<a href="../user-guide/formatters#visualstudio">visualstudio</a>”</li>
</ul>

<p>or the full path to a JavaScript file containing a custom formatter. You can also omit the argument to retrieve the default formatter.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">CLIEngine</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">CLIEngine</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">cli</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CLIEngine</span><span class="p">({</span>
    <span class="na">envs</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">browser</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">mocha</span><span class="dl">"</span><span class="p">],</span>
    <span class="na">useEslintrc</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">semi</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// lint myfile.js and all files in lib/</span>
<span class="kd">var</span> <span class="nx">report</span> <span class="o">=</span> <span class="nx">cli</span><span class="p">.</span><span class="nx">executeOnFiles</span><span class="p">([</span><span class="dl">"</span><span class="s2">myfile.js</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">lib/</span><span class="dl">"</span><span class="p">]);</span>

<span class="c1">// get the default formatter</span>
<span class="kd">var</span> <span class="nx">formatter</span> <span class="o">=</span> <span class="nx">cli</span><span class="p">.</span><span class="nx">getFormatter</span><span class="p">();</span>

<span class="c1">// Also could do...</span>
<span class="c1">// var formatter = cli.getFormatter("compact");</span>
<span class="c1">// var formatter = cli.getFormatter("./my/formatter.js");</span>

<span class="c1">// output to console</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">formatter</span><span class="p">(</span><span class="nx">report</span><span class="p">.</span><span class="nx">results</span><span class="p">));</span>
</code></pre></div></div>

<p><strong>Note:</strong> Also available as a static function on <code class="language-plaintext highlighter-rouge">CLIEngine</code>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// get the default formatter by calling the static function</span>
<span class="kd">var</span> <span class="nx">formatter</span> <span class="o">=</span> <span class="nx">CLIEngine</span><span class="p">.</span><span class="nx">getFormatter</span><span class="p">();</span>
</code></pre></div></div>

<p><strong>Important:</strong> You must pass in the <code class="language-plaintext highlighter-rouge">results</code> property of the report. Passing in <code class="language-plaintext highlighter-rouge">report</code> directly will result in an error.</p>

<h3 id="clienginegeterrorresults">CLIEngine#getErrorResults()</h3>

<p>This is a static function on <code class="language-plaintext highlighter-rouge">CLIEngine</code>. It can be used to filter out all the non error messages from the report object.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">CLIEngine</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">CLIEngine</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">cli</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CLIEngine</span><span class="p">({</span>
    <span class="na">envs</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">browser</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">mocha</span><span class="dl">"</span><span class="p">],</span>
    <span class="na">useEslintrc</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">semi</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// lint myfile.js and all files in lib/</span>
<span class="kd">var</span> <span class="nx">report</span> <span class="o">=</span> <span class="nx">cli</span><span class="p">.</span><span class="nx">executeOnFiles</span><span class="p">([</span><span class="dl">"</span><span class="s2">myfile.js</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">lib/</span><span class="dl">"</span><span class="p">]);</span>

<span class="c1">// only get the error messages</span>
<span class="kd">var</span> <span class="nx">errorReport</span> <span class="o">=</span> <span class="nx">CLIEngine</span><span class="p">.</span><span class="nx">getErrorResults</span><span class="p">(</span><span class="nx">report</span><span class="p">.</span><span class="nx">results</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Important:</strong> You must pass in the <code class="language-plaintext highlighter-rouge">results</code> property of the report. Passing in <code class="language-plaintext highlighter-rouge">report</code> directly will result in an error.</p>

<h3 id="cliengineoutputfixes">CLIEngine#outputFixes()</h3>

<p>This is a static function on <code class="language-plaintext highlighter-rouge">CLIEngine</code> that is used to output fixes from <code class="language-plaintext highlighter-rouge">report</code> to disk. It does by looking for files that have an <code class="language-plaintext highlighter-rouge">output</code> property in their results. Here’s an example:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">CLIEngine</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">CLIEngine</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">cli</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CLIEngine</span><span class="p">({</span>
    <span class="na">envs</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">browser</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">mocha</span><span class="dl">"</span><span class="p">],</span>
    <span class="na">fix</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">useEslintrc</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">semi</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// lint myfile.js and all files in lib/</span>
<span class="kd">var</span> <span class="nx">report</span> <span class="o">=</span> <span class="nx">cli</span><span class="p">.</span><span class="nx">executeOnFiles</span><span class="p">([</span><span class="dl">"</span><span class="s2">myfile.js</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">lib/</span><span class="dl">"</span><span class="p">]);</span>

<span class="c1">// output fixes to disk</span>
<span class="nx">CLIEngine</span><span class="p">.</span><span class="nx">outputFixes</span><span class="p">(</span><span class="nx">report</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="clienginegetrules">CLIEngine#getRules()</h3>

<p>This method returns a map of all loaded rules. Under the hood, it calls <a href="#lintergetrules">Linter#getRules</a>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">CLIEngine</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">CLIEngine</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">cli</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CLIEngine</span><span class="p">();</span>

<span class="nx">cli</span><span class="p">.</span><span class="nx">getRules</span><span class="p">();</span>

<span class="cm">/*
Map {
  'accessor-pairs' =&gt; { meta: { docs: [Object], schema: [Array] }, create: [Function: create] },
  'array-bracket-newline' =&gt; { meta: { docs: [Object], schema: [Array] }, create: [Function: create] },
  ...
}
*/</span>
</code></pre></div></div>

<h3 id="cliengineversion">CLIEngine.version</h3>

<p><code class="language-plaintext highlighter-rouge">CLIEngine</code> has a static <code class="language-plaintext highlighter-rouge">version</code> property containing the semantic version number of ESLint that it comes from.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">CLIEngine</span><span class="p">.</span><span class="nx">version</span><span class="p">;</span> <span class="c1">// '4.5.0'</span>
</code></pre></div></div>

<h2 id="ruletester">RuleTester</h2>

<p><code class="language-plaintext highlighter-rouge">eslint.RuleTester</code> is a utility to write tests for ESLint rules. It is used internally for the bundled rules that come with ESLint, and it can also be used by plugins.</p>

<p>Example usage:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="dl">"</span><span class="s2">use strict</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">rule</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">../../../lib/rules/my-rule</span><span class="dl">"</span><span class="p">),</span>
    <span class="nx">RuleTester</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">RuleTester</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">ruleTester</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RuleTester</span><span class="p">();</span>

<span class="nx">ruleTester</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="dl">"</span><span class="s2">my-rule</span><span class="dl">"</span><span class="p">,</span> <span class="nx">rule</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">valid</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="na">code</span><span class="p">:</span> <span class="dl">"</span><span class="s2">var foo = true</span><span class="dl">"</span><span class="p">,</span>
            <span class="na">options</span><span class="p">:</span> <span class="p">[{</span> <span class="na">allowFoo</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}]</span>
        <span class="p">}</span>
    <span class="p">],</span>

    <span class="na">invalid</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="na">code</span><span class="p">:</span> <span class="dl">"</span><span class="s2">var invalidVariable = true</span><span class="dl">"</span><span class="p">,</span>
            <span class="na">errors</span><span class="p">:</span> <span class="p">[{</span> <span class="na">message</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Unexpected invalid variable.</span><span class="dl">"</span> <span class="p">}]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="na">code</span><span class="p">:</span> <span class="dl">"</span><span class="s2">var invalidVariable = true</span><span class="dl">"</span><span class="p">,</span>
            <span class="na">errors</span><span class="p">:</span> <span class="p">[{</span> <span class="na">message</span><span class="p">:</span> <span class="sr">/^Unexpected.+variable/</span> <span class="p">}]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">});</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">RuleTester</code> constructor accepts an optional object argument, which can be used to specify defaults for your test cases. For example, if all of your test cases use ES2015, you can set it as a default:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">ruleTester</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RuleTester</span><span class="p">({</span> <span class="na">parserOptions</span><span class="p">:</span> <span class="p">{</span> <span class="na">ecmaVersion</span><span class="p">:</span> <span class="mi">2015</span> <span class="p">}</span> <span class="p">});</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">RuleTester#run()</code> method is used to run the tests. It should be passed the following arguments:</p>

<ul>
  <li>The name of the rule (string)</li>
  <li>The rule object itself (see <a href="./working-with-rules">“working with rules”</a>)</li>
  <li>An object containing <code class="language-plaintext highlighter-rouge">valid</code> and <code class="language-plaintext highlighter-rouge">invalid</code> properties, each of which is an array containing test cases.</li>
</ul>

<p>A test case is an object with the following properties:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">code</code> (string, required): The source code that the rule should be run on</li>
  <li><code class="language-plaintext highlighter-rouge">options</code> (array, optional): The options passed to the rule. The rule severity should not be included in this list.</li>
  <li><code class="language-plaintext highlighter-rouge">filename</code> (string, optional): The filename for the given case (useful for rules that make assertions about filenames).</li>
</ul>

<p>In addition to the properties above, invalid test cases can also have the following properties:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">errors</code> (number or array, required): Asserts some properties of the errors that the rule is expected to produce when run on this code. If this is a number, asserts the number of errors produced. Otherwise, this should be a list of objects, each containing information about a single reported error. The following properties can be used for an error (all are optional):
    <ul>
      <li><code class="language-plaintext highlighter-rouge">message</code> (string/regexp): The message for the error</li>
      <li><code class="language-plaintext highlighter-rouge">type</code> (string): The type of the reported AST node</li>
      <li><code class="language-plaintext highlighter-rouge">line</code> (number): The 1-based line number of the reported location</li>
      <li><code class="language-plaintext highlighter-rouge">column</code> (number): The 1-based column number of the reported location</li>
      <li><code class="language-plaintext highlighter-rouge">endLine</code> (number): The 1-based line number of the end of the reported location</li>
      <li><code class="language-plaintext highlighter-rouge">endColumn</code> (number): The 1-based column number of the end of the reported location</li>
    </ul>

    <p>If a string is provided as an error instead of an object, the string is used to assert the <code class="language-plaintext highlighter-rouge">message</code> of the error.</p>
  </li>
  <li><code class="language-plaintext highlighter-rouge">output</code> (string, optional): Asserts the output that will be produced when using this rule for a single pass of autofixing (e.g. with the <code class="language-plaintext highlighter-rouge">--fix</code> command line flag). If this is <code class="language-plaintext highlighter-rouge">null</code>, asserts that none of the reported problems suggest autofixes.</li>
</ul>

<p>Any additional properties of a test case will be passed directly to the linter as config options. For example, a test case can have a <code class="language-plaintext highlighter-rouge">parserOptions</code> property to configure parser behavior:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">code</span><span class="p">:</span> <span class="dl">"</span><span class="s2">let foo;</span><span class="dl">"</span><span class="p">,</span>
    <span class="nx">parserOptions</span><span class="p">:</span> <span class="p">{</span> <span class="nl">ecmaVersion</span><span class="p">:</span> <span class="mi">2015</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>If a valid test case only uses the <code class="language-plaintext highlighter-rouge">code</code> property, it can optionally be provided as a string containing the code, rather than an object with a <code class="language-plaintext highlighter-rouge">code</code> key.</p>

<h3 id="customizing-ruletester">Customizing RuleTester</h3>

<p><code class="language-plaintext highlighter-rouge">RuleTester</code> depends on two functions to run tests: <code class="language-plaintext highlighter-rouge">describe</code> and <code class="language-plaintext highlighter-rouge">it</code>. These functions can come from various places:</p>

<ol>
  <li>If <code class="language-plaintext highlighter-rouge">RuleTester.describe</code> and <code class="language-plaintext highlighter-rouge">RuleTester.it</code> have been set to function values, <code class="language-plaintext highlighter-rouge">RuleTester</code> will use <code class="language-plaintext highlighter-rouge">RuleTester.describe</code> and <code class="language-plaintext highlighter-rouge">RuleTester.it</code> to run tests. You can use this to customize the behavior of <code class="language-plaintext highlighter-rouge">RuleTester</code> to match a test framework that you’re using.</li>
  <li>Otherwise, if <code class="language-plaintext highlighter-rouge">describe</code> and <code class="language-plaintext highlighter-rouge">it</code> are present as globals, <code class="language-plaintext highlighter-rouge">RuleTester</code> will use <code class="language-plaintext highlighter-rouge">global.describe</code> and <code class="language-plaintext highlighter-rouge">global.it</code> to run tests. This allows <code class="language-plaintext highlighter-rouge">RuleTester</code> to work when using frameworks like <a href="https://mochajs.org/">Mocha</a> without any additional configuration.</li>
  <li>Otherwise, <code class="language-plaintext highlighter-rouge">RuleTester#run</code> will simply execute all of the tests in sequence, and will throw an error if one of them fails. This means you can simply execute a test file that calls <code class="language-plaintext highlighter-rouge">RuleTester.run</code> using <code class="language-plaintext highlighter-rouge">node</code>, without needing a testing framework.</li>
</ol>

<p><code class="language-plaintext highlighter-rouge">RuleTester#run</code> calls the <code class="language-plaintext highlighter-rouge">describe</code> function with two arguments: a string describing the rule, and a callback function. The callback calls the <code class="language-plaintext highlighter-rouge">it</code> function with a string describing the test case, and a test function. The test function will return successfully if the test passes, and throw an error if the test fails. (Note that this is the standard behavior for test suites when using frameworks like <a href="https://mochajs.org/">Mocha</a>; this information is only relevant if you plan to customize <code class="language-plaintext highlighter-rouge">RuleTester.it</code> and <code class="language-plaintext highlighter-rouge">RuleTester.describe</code>.)</p>

<p>Example of customizing <code class="language-plaintext highlighter-rouge">RuleTester</code>:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="dl">"</span><span class="s2">use strict</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">RuleTester</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">).</span><span class="nx">RuleTester</span><span class="p">,</span>
    <span class="nx">test</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">my-test-runner</span><span class="dl">"</span><span class="p">),</span>
    <span class="nx">myRule</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">../../../lib/rules/my-rule</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">RuleTester</span><span class="p">.</span><span class="nx">describe</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">method</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">RuleTester</span><span class="p">.</span><span class="nx">it</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="nx">text</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">method</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">RuleTester</span><span class="p">.</span><span class="nx">it</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">method</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">test</span><span class="p">(</span><span class="nx">RuleTester</span><span class="p">.</span><span class="nx">it</span><span class="p">.</span><span class="nx">title</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">method</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">// then use RuleTester as documented</span>

<span class="kd">const</span> <span class="nx">ruleTester</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RuleTester</span><span class="p">();</span>

<span class="nx">ruleTester</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="dl">"</span><span class="s2">my-rule</span><span class="dl">"</span><span class="p">,</span> <span class="nx">myRule</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">valid</span><span class="p">:</span> <span class="p">[</span>
        <span class="c1">// valid test cases</span>
    <span class="p">],</span>
    <span class="na">invalid</span><span class="p">:</span> <span class="p">[</span>
        <span class="c1">// invalid test cases</span>
    <span class="p">]</span>
<span class="p">})</span>
</code></pre></div></div>

<h2 id="deprecated-apis">Deprecated APIs</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">cli</code> - the <code class="language-plaintext highlighter-rouge">cli</code> object has been deprecated in favor of <code class="language-plaintext highlighter-rouge">CLIEngine</code>. As of v1.0.0, <code class="language-plaintext highlighter-rouge">cli</code> is no longer exported and should not be used by external tools.</li>
  <li><code class="language-plaintext highlighter-rouge">linter</code> - the <code class="language-plaintext highlighter-rouge">linter</code> object has been deprecated in favor of <code class="language-plaintext highlighter-rouge">Linter</code> as of v4.0.0.</li>
</ul>

  </article>
</main>

    <hr>

    <div class="container">

      <footer>
        <ul class="list-inline">
          
            <li><a href="https://github.com/eslint/eslint/edit/master/docs/developer-guide/nodejs-api.md">Edit this page</a></li>
          
          <li><a href="https://groups.google.com/group/eslint">Mailing List</a></li>
          <li><a href="https://github.com/eslint/eslint">GitHub</a></li>
          <li><a href="https://twitter.com/geteslint">Twitter</a></li>
          <li><a href="https://gitter.im/eslint/eslint">Chat Room</a></li>
          <li>Copyright JS Foundation and other contributors, <a href="https://js.foundation">https://js.foundation/</a></li>
        </ul>
      </footer>
    </div><!-- /.container -->

  <link href="/styles/vendor/font.css" rel="stylesheet">
  <script src="/js/vendor/jquery-1.10.2.min.js" defer></script>
  <script src="/js/vendor/bootstrap-native.min.js" defer></script>
  <script src="/js/vendor/anchor.min.js"></script>
      <!-- at the end of the BODY -->
  <script type="text/javascript" src="/js/vendor/docsearch.min.js"></script>
  <script type="text/javascript"> docsearch({
    apiKey: '891b0e977d96c762a3821e0c00172ac9',
    indexName: 'eslint',
    inputSelector: '#eslint-search-input',
    algoliaOptions: { 'facetFilters': [["tags:docs", "tags:blog"]] },
    debug: false // Set debug to true if you want to inspect the dropdown
  });
  var htmlClassList = document.documentElement.classList;
  htmlClassList.remove("no-js");
  htmlClassList.add("js");
  </script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      anchors.add('.doc h2, .doc h3, .doc h4, .blog h2, .blog h3, .blog h4');
      
	
	    var langs = {mixed: '中英文',zh: '中文',en: '英文'};
	    var last = localStorage.getItem('lang') || 'zh';

	    if (last in langs) {
	      $('.lang-chooser').html(langs[last]); 
	      $('.doc').removeClass(function(index,clz){
	          return clz.slice(3);
	      }).addClass('lang-' + last);
	    }

	    $('.navbar-left').show();

	    $('.lang-type').on('click', function() {
	        var $this = $(this),
	            type = $this.data('lang'),
	            lang = $this.html();

	        localStorage.setItem('lang', type);

	        $('.lang-chooser').html(lang); 
	        $('.doc').removeClass(function(index,clz){
	            return clz.slice(3);
	        }).addClass('lang-' + type);
	    });
	
  });
	
  </script>
  <style type="text/css">#cnzz_stat_icon_1278836435 {display: none;}</style>
  <script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1278836435'%3E%3C/span%3E%3Cscript src='https://s4.cnzz.com/z_stat.php%3Fid%3D1278836435%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
  
</body>
</html>

