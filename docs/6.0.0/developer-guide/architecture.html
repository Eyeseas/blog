<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="keywords" content="ESLint中文, ESLint中文网, ESLint规则, ESLint配置, 代码检测, 代码质量, JavaScript, Linter, Linting, Pluggable, Configurable, Code Quality">
  <meta name="description" content="ESLint中文官网, ESLint中英文对照, JavaScript代码检测, JavaScript代码风格检测, JavaScript代码自动格式化,A pluggable and configurable linter tool for identifying and reporting on patterns in JavaScript. Maintain your code quality with ease.">
  <meta name="theme-color" content="#463fd4"/>
  <meta property="og:locale" content="zh_CN">
  <meta property="og:site_name" content="ESLint中文">
  <meta property="og:title" content="Architecture">
  <meta property="og:url" content="http://localhost:4000/docs/6.0.0/developer-guide/architecture">
  <meta property="og:image" content="http://localhost:4000/img/favicon.512x512.png">

  <meta name="twitter:site" content="@geteslint">
  <meta name="twitter:title" content="Architecture">
  <meta name="twitter:description" content="ESLint中文官网, ESLint中英文对照, JavaScript代码检测, JavaScript代码风格检测, JavaScript代码自动格式化,A pluggable and configurable linter tool for identifying and reporting on patterns in JavaScript. Maintain your code quality with ease.">
  <meta name="twitter:url" content="http://localhost:4000/docs/6.0.0/developer-guide/architecture">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:image" content="http://localhost:4000/img/favicon.512x512.png">

    
        <title>Architecture - ESLint中文</title>
    


  <link href="http://localhost:4000/docs/6.0.0/developer-guide/architecture" rel="canonical" />
  <link rel="stylesheet" href="/styles/main.css"/>
  
  <link rel="stylesheet" href="/styles/mixed.css"/>
  
  <link rel='manifest' href='http://localhost:4000/manifest.json'>
  <link rel="icon" href="http://localhost:4000/img/favicon.512x512.png">
  <link rel="alternate" type="application/rss+xml" title="ESLint中文" href="http://localhost:4000/feed.xml">
  <!-- at the end of the HEAD -->
  <link rel="stylesheet" href="/styles/vendor/docsearch.min.css" />
</head>
<body>

<input type="checkbox" id="eslint-toggle-search" class="eslint-toggle-search-checkbox" />
<header class="navbar navbar-default navbar-demo navbar-fixed-top eslint-nav" id="top" role="banner">
  <div class="container">

    <a href="http://localhost:4000/" class="navbar-brand"><img alt="ESLint" src="http://localhost:4000/img/logo.svg" itemprop="image">ESLint</a>

    <div class="eslint-navbar-toggles">
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#eslint-navbar" aria-controls="eslint-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <label for="eslint-toggle-search" class="navbar-toggle eslint-toggle-search-open">
        <span class="sr-only">Open search</span>
        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
      </label>
    </div>

    <nav id="eslint-navbar" class="collapse navbar-collapse eslint-navbar">
      
      <ul class="nav navbar-nav navbar-left">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><span class="lang-chooser">中文</span><span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a class="lang-type" data-lang="zh" href="javascript:;">中文</a></li>
            <li><a class="lang-type" data-lang="mixed" href="javascript:;">中英文</a></li>
            <li><a class="lang-type" data-lang="en" href="javascript:;">英文</a></li>
          </ul>
        </li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="http://localhost:4000/docs/user-guide" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">用户指南<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="http://localhost:4000/docs/user-guide/getting-started">开始</a></li>
            <li><a href="http://localhost:4000/docs/user-guide/configuring">配置</a></li>
            <li><a href="http://localhost:4000/docs/user-guide/command-line-interface">命令行</a></li>
            <li><a href="http://localhost:4000/docs/rules/">规则</a></li>
            <li><a href="http://localhost:4000/docs/user-guide/formatters">Formatters</a></li>
            <li><a href="http://localhost:4000/docs/user-guide/integrations">集成</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="http://localhost:4000/docs/developer-guide" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">开发指南<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="http://localhost:4000/docs/developer-guide/architecture">架构</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/source-code">源码</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/development-environment">开发环境</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/contributing">参与</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/unit-tests">单元测试</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/working-with-rules">创建规则</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/working-with-custom-formatters">自定义格式化器</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/working-with-custom-parsers">自定义解析器</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/working-with-plugins">开发插件</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/shareable-configs">可共享的配置</a></li>
            <li><a href="http://localhost:4000/docs/developer-guide/nodejs-api">Node.js API</a></li>
            <li><a href="http://localhost:4000/docs/maintainer-guide">维护者指南</a></li>
          </ul>
        </li>
        <li><a href="http://localhost:4000/blog/">博客</a></li>
        <li class="dropdown">
          <a href="http://localhost:4000/demo" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">演示<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="http://localhost:4000/demo/">ESLint Demo</a></li>
            <li><a href="http://localhost:4000/parser/">Espree Demo</a></li>
          </ul>
        </li>
        <!-- <li><a href="http://localhost:4000/docs/about/">About</a></li> -->
        <li class="dropdown">
          <a href="http://localhost:4000/docs/about/" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">关于<span
              class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="http://localhost:4000/users/">谁在使用 ESLint?</a></li>
            <li><a href="http://localhost:4000/team/">关于 Team</a></li>
            <li><a href="http://localhost:4000/docs/about/">关于 ESLint</a></li>
          </ul>
        </li>
      </ul>

      <label for="eslint-toggle-search" class="navbar-toggle eslint-toggle-search-open">
        <span class="sr-only">Open search</span>
        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
      </label>

      <div class="navbar-form navbar-right eslint-search" role="search">
        <div class="input-group">
          <label class="sr-only" aria-label="Search" for="eslint-search-input">Search</label>
          <div class="eslint-search-input-wrapper">
            <input type="text" class="form-control" id="eslint-search-input" accesskey="s" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search the docs...">
            <label for="eslint-toggle-search" class="eslint-toggle-search-close">
              <span class="sr-only">Close search</span>
              <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
            </label>
          </div>
        </div>
      </div>
    </nav>

  </div><!-- /.container -->
</header><!-- /.navbar -->

<main class="doc lang-zh">
  <article class="container">
    <!-- Note: No pull requests accepted for this file. See README.md in the root directory for details. -->

<h1 id="architecture">Architecture</h1>

<p>At a high level, there are a few key parts to ESLint:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">bin/eslint.js</code> - this is the file that actually gets executed with the command line utility. It’s a dumb wrapper that does nothing more than bootstrap ESLint, passing the command line arguments to <code class="language-plaintext highlighter-rouge">cli</code>. This is intentionally small so as not to require heavy testing.</li>
  <li><code class="language-plaintext highlighter-rouge">lib/cli.js</code> - this is the heart of the ESLint CLI. It takes an array of arguments and then uses <code class="language-plaintext highlighter-rouge">eslint</code> to execute the commands. By keeping this as a separate utility, it allows others to effectively call ESLint from within another Node.js program as if it were done on the command line. The main call is <code class="language-plaintext highlighter-rouge">cli.execute()</code>. This is also the part that does all the file reading, directory traversing, input, and output.</li>
  <li><code class="language-plaintext highlighter-rouge">lib/linter.js</code> - this is the core Linter class that does code verifying based on configuration options. This file does no file I/O and does not interact with the <code class="language-plaintext highlighter-rouge">console</code> at all. For other Node.js programs that have JavaScript text to verify, they would be able to use this interface directly.</li>
  <li><code class="language-plaintext highlighter-rouge">lib/api.js</code> - this exposes an object that contains Linter, CLIEngine, RuleTester, and SourceCode.</li>
  <li><code class="language-plaintext highlighter-rouge">lib/testers/rule-tester.js</code> - this is a wrapper around Mocha, so that rules can be unit tested. This class lets us write consistently formatted tests for each rule that is implemented and be confident that each of the rules work. The RuleTester interface was modeled after Mocha and works with Mocha’s global testing methods. RuleTester can also be modified to work with other testing frameworks.</li>
  <li><code class="language-plaintext highlighter-rouge">lib/util/source-code.js</code> - this contains a SourceCode class that is used to represent the parsed source code. It takes in source code and the Program node of the AST representing the code.</li>
</ul>

<h2 id="the-cli-object">The <code class="language-plaintext highlighter-rouge">cli</code> object</h2>

<p>The <code class="language-plaintext highlighter-rouge">cli</code> object is the API for the command line interface. Literally, the <code class="language-plaintext highlighter-rouge">bin/eslint.js</code> file simply passes arguments to the <code class="language-plaintext highlighter-rouge">cli</code> object and then sets <code class="language-plaintext highlighter-rouge">process.exitCode</code> to the returned exit code.</p>

<p>The main method is <code class="language-plaintext highlighter-rouge">cli.execute()</code>, which accepts an array of strings that represent the command line options (as if <code class="language-plaintext highlighter-rouge">process.argv</code> were passed without the first two arguments). If you want to run ESLint from inside of another program and have it act like the CLI, then <code class="language-plaintext highlighter-rouge">cli</code> is the object to use.</p>

<p>This object’s responsibilities include:</p>

<ul>
  <li>Interpreting command line arguments</li>
  <li>Reading from the file system</li>
  <li>Outputting to the console</li>
  <li>Outputting to the filesystem</li>
  <li>Use a formatter</li>
  <li>Returning the correct exit code</li>
</ul>

<p>This object may not:</p>

<ul>
  <li>Call <code class="language-plaintext highlighter-rouge">process.exit()</code> directly</li>
  <li>Perform any asynchronous operations</li>
</ul>

<h2 id="the-cliengine-object">The <code class="language-plaintext highlighter-rouge">CLIEngine</code> object</h2>

<p>The <code class="language-plaintext highlighter-rouge">CLIEngine</code> type represents the core functionality of the CLI except that it reads nothing from the command line and doesn’t output anything by default. Instead, it accepts many (but not all) of the arguments that are passed into the CLI. It reads both configuration and source files as well as managing the environment that is passed into the <code class="language-plaintext highlighter-rouge">eslint</code> object.</p>

<p>The main method of the <code class="language-plaintext highlighter-rouge">CLIEngine</code> is <code class="language-plaintext highlighter-rouge">executeOnFiles()</code>, which accepts an array of file and directory names to run the linter on.</p>

<p>This object’s responsibilities include:</p>

<ul>
  <li>Managing the execution environment for <code class="language-plaintext highlighter-rouge">eslint</code></li>
  <li>Reading from the file system</li>
  <li>Loading rule definitions</li>
  <li>Reading configuration information from config files (including <code class="language-plaintext highlighter-rouge">.eslintrc</code> and <code class="language-plaintext highlighter-rouge">package.json</code>)</li>
</ul>

<p>This object may not:</p>

<ul>
  <li>Call <code class="language-plaintext highlighter-rouge">process.exit()</code> directly</li>
  <li>Perform any asynchronous operations</li>
  <li>Output to the console</li>
  <li>Use formatters</li>
</ul>

<h2 id="the-eslint-object">The <code class="language-plaintext highlighter-rouge">eslint</code> object</h2>

<p>The main method of the <code class="language-plaintext highlighter-rouge">eslint</code> object is <code class="language-plaintext highlighter-rouge">verify()</code> and accepts two arguments: the source text to verify and a configuration object (the baked configuration of the given configuration file plus command line options). The method first parses the given text with <code class="language-plaintext highlighter-rouge">espree</code> (or whatever the configured parser is) and retrieves the AST. The AST is produced with both line/column and range locations which are useful for reporting location of issues and retrieving the source text related to an AST node, respectively.</p>

<p>Once the AST is available, <code class="language-plaintext highlighter-rouge">estraverse</code> is used to traverse the AST from top to bottom. At each node, the <code class="language-plaintext highlighter-rouge">eslint</code> object emits an event that has the same name as the node type (i.e., “Identifier”, “WithStatement”, etc.). On the way back up the subtree, an event is emitted with the AST type name and suffixed with “:exit”, such as “Identifier:exit” - this allows rules to take action both on the way down and on the way up in the traversal. Each event is emitted with the appropriate AST node available.</p>

<p>This object’s responsibilities include:</p>

<ul>
  <li>Inspecting JavaScript code strings</li>
  <li>Creating an AST for the code</li>
  <li>Executing rules on the AST</li>
  <li>Reporting back the results of the execution</li>
</ul>

<p>This object may not:</p>

<ul>
  <li>Call <code class="language-plaintext highlighter-rouge">process.exit()</code> directly</li>
  <li>Perform any asynchronous operations</li>
  <li>Use Node.js-specific features</li>
  <li>Access the file system</li>
  <li>Call <code class="language-plaintext highlighter-rouge">console.log()</code> or any other similar method</li>
</ul>

<h2 id="rules">Rules</h2>

<p>Individual rules are the most specialized part of the ESLint architecture. Rules can do very little, they are simply a set of instructions executed against an AST that is provided. They do get some context information passed in, but the primary responsibility of a rule is to inspect the AST and report warnings.</p>

<p>These objects’ responsibilities are:</p>

<ul>
  <li>Inspect the AST for specific patterns</li>
  <li>Reporting warnings when certain patterns are found</li>
</ul>

<p>These objects may not:</p>

<ul>
  <li>Call <code class="language-plaintext highlighter-rouge">process.exit()</code> directly</li>
  <li>Perform any asynchronous operations</li>
  <li>Use Node.js-specific features</li>
  <li>Access the file system</li>
  <li>Call <code class="language-plaintext highlighter-rouge">console.log()</code> or any other similar method</li>
</ul>

  </article>
</main>

    <hr>

    <div class="container">

      <footer>
        <ul class="list-inline">
          
            <li><a href="https://github.com/eslint/eslint/edit/master/docs/developer-guide/architecture.md">Edit this page</a></li>
          
          <li><a href="https://groups.google.com/group/eslint">Mailing List</a></li>
          <li><a href="https://github.com/eslint/eslint">GitHub</a></li>
          <li><a href="https://twitter.com/geteslint">Twitter</a></li>
          <li><a href="https://gitter.im/eslint/eslint">Chat Room</a></li>
          <li>Copyright JS Foundation and other contributors, <a href="https://js.foundation">https://js.foundation/</a></li>
        </ul>
      </footer>
    </div><!-- /.container -->

  <link href="/styles/vendor/font.css" rel="stylesheet">
  <script src="/js/vendor/jquery-1.10.2.min.js" defer></script>
  <script src="/js/vendor/bootstrap-native.min.js" defer></script>
  <script src="/js/vendor/anchor.min.js"></script>
      <!-- at the end of the BODY -->
  <script type="text/javascript" src="/js/vendor/docsearch.min.js"></script>
  <script type="text/javascript"> docsearch({
    apiKey: '891b0e977d96c762a3821e0c00172ac9',
    indexName: 'eslint',
    inputSelector: '#eslint-search-input',
    algoliaOptions: { 'facetFilters': [["tags:docs", "tags:blog"]] },
    debug: false // Set debug to true if you want to inspect the dropdown
  });
  var htmlClassList = document.documentElement.classList;
  htmlClassList.remove("no-js");
  htmlClassList.add("js");
  </script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      anchors.add('.doc h2, .doc h3, .doc h4, .blog h2, .blog h3, .blog h4');
      
	
	    var langs = {mixed: '中英文',zh: '中文',en: '英文'};
	    var last = localStorage.getItem('lang') || 'zh';

	    if (last in langs) {
	      $('.lang-chooser').html(langs[last]); 
	      $('.doc').removeClass(function(index,clz){
	          return clz.slice(3);
	      }).addClass('lang-' + last);
	    }

	    $('.navbar-left').show();

	    $('.lang-type').on('click', function() {
	        var $this = $(this),
	            type = $this.data('lang'),
	            lang = $this.html();

	        localStorage.setItem('lang', type);

	        $('.lang-chooser').html(lang); 
	        $('.doc').removeClass(function(index,clz){
	            return clz.slice(3);
	        }).addClass('lang-' + type);
	    });
	
  });
	
  </script>
  <style type="text/css">#cnzz_stat_icon_1278836435 {display: none;}</style>
  <script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1278836435'%3E%3C/span%3E%3Cscript src='https://s4.cnzz.com/z_stat.php%3Fid%3D1278836435%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
  
</body>
</html>

